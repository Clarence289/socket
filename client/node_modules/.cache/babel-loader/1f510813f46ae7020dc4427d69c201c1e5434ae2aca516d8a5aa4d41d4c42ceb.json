{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\OneDrive\\\\Desktop\\\\socket\\\\client\\\\src\\\\components\\\\Chat\\\\Chat.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { io } from 'socket.io-client';\nimport queryString from 'query-string';\nimport EmojiPicker from 'emoji-picker-react';\nimport './Chat.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst NOTIFICATION_SOUND_URL = \"https://assets.mixkit.co/sfx/preview/mixkit-bell-notification-933.mp3\";\nconst NAMESPACE = '/chat';\nconst API_URL = 'http://192.168.0.203:5000';\nconst REACTIONS = ['👍', '❤️', '😂', '😮', '😢', '👏'];\nfunction TypingDots() {\n  _s();\n  const [dots, setDots] = useState('');\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setDots(prev => prev.length < 3 ? prev + '.' : '');\n    }, 400);\n    return () => clearInterval(interval);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    children: dots\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 10\n  }, this);\n}\n_s(TypingDots, \"x5A7Sg53ZjAlz59b/ycs4VK0Y+g=\");\n_c = TypingDots;\nconst Chat = ({\n  onLeave\n}) => {\n  _s2();\n  const {\n    search\n  } = useLocation();\n  const navigate = useNavigate();\n  const params = queryString.parse(search);\n  const name = params.name || localStorage.getItem('chat_name');\n  const room = params.room || localStorage.getItem('chat_room');\n  const avatar = params.avatar || localStorage.getItem('chat_avatar');\n  useEffect(() => {\n    if (!name || !room) {\n      navigate('/');\n    }\n  }, [name, room, navigate]);\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [recording, setRecording] = useState(false);\n  const [mediaRecorder, setMediaRecorder] = useState(null);\n  const [audioChunks, setAudioChunks] = useState([]);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [typingUser, setTypingUser] = useState('');\n  const [isSenderTyping, setIsSenderTyping] = useState(false);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [recipient, setRecipient] = useState('');\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [userInteracted, setUserInteracted] = useState(false);\n  const [loadingOlder, setLoadingOlder] = useState(false);\n  const [hasMore, setHasMore] = useState(true);\n  const [isConnected, setIsConnected] = useState(true);\n  const [isReconnecting, setIsReconnecting] = useState(false);\n  const [pendingMessages, setPendingMessages] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [highlightedMsgId, setHighlightedMsgId] = useState(null);\n  const [editingMsgId, setEditingMsgId] = useState(null);\n  const [editingText, setEditingText] = useState('');\n  const [fileType, setFileType] = useState('');\n  const recordingIntervalRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const messagesEndRef = useRef(null);\n  const firstMessageRef = useRef(null);\n  const socketRef = useRef();\n  const longPressTimerRef = useRef(null);\n  useEffect(() => {\n    const fetchMessages = async () => {\n      try {\n        const res = await fetch(`${API_URL}/api/messages?room=${room}`);\n        const data = await res.json();\n        setMessages(data);\n      } catch (err) {}\n    };\n    fetchMessages();\n  }, [room]);\n  useEffect(() => {\n    const setInteracted = () => setUserInteracted(true);\n    window.addEventListener('click', setInteracted, {\n      once: true\n    });\n    window.addEventListener('keydown', setInteracted, {\n      once: true\n    });\n    return () => {\n      window.removeEventListener('click', setInteracted);\n      window.removeEventListener('keydown', setInteracted);\n    };\n  }, []);\n  useEffect(() => {\n    if (Notification.permission !== 'granted') {\n      Notification.requestPermission();\n    }\n  }, []);\n  useEffect(() => {\n    socketRef.current = io(API_URL + NAMESPACE, {\n      transports: ['websocket'],\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000\n    });\n    const socket = socketRef.current;\n    socket.emit('user_join', {\n      name,\n      room,\n      avatar\n    });\n    socket.on('connect', () => {\n      setIsConnected(true);\n      setIsReconnecting(false);\n    });\n    socket.on('disconnect', () => {\n      setIsConnected(false);\n      setIsReconnecting(true);\n    });\n    socket.on('reconnect_attempt', () => {\n      setIsReconnecting(true);\n    });\n    socket.on('reconnect', () => {\n      setIsConnected(true);\n      setIsReconnecting(false);\n    });\n    socket.on('receive_message', data => {\n      setPendingMessages(prev => prev.filter(pm => pm._clientId !== data._clientId));\n      setMessages(prev => [...prev.filter(m => m._clientId !== data._clientId), data]);\n      if (userInteracted && data.sender !== name) {\n        const audio = new Audio(NOTIFICATION_SOUND_URL);\n        audio.play().catch(() => {});\n      }\n      if (Notification.permission === 'granted' && data.sender !== name) {\n        new Notification(`New message from ${data.sender}`, {\n          body: data.message || (data.file ? data.file.name : 'Media message')\n        });\n      }\n      if (document.hidden) setUnreadCount(c => c + 1);\n    });\n    socket.on('push_notification', ({\n      title,\n      body\n    }) => {\n      if (Notification.permission === 'granted') {\n        new Notification(title, {\n          body\n        });\n      }\n    });\n    socket.on('typing', data => {\n      if (data.username !== name && data.isTyping) {\n        setTypingUser(data.username);\n      } else if (data.username === name && data.isTyping) {\n        setIsSenderTyping(true);\n      } else if (data.username === name && !data.isTyping) {\n        setIsSenderTyping(false);\n      } else if (!data.isTyping) {\n        setTypingUser('');\n      }\n    });\n    socket.on('active_users', users => {\n      setOnlineUsers(users);\n    });\n    socket.on('user_event', data => {\n      if (Notification.permission === 'granted') {\n        if (data.type === 'join') {\n          new Notification('User joined', {\n            body: `${data.user} joined the room.`\n          });\n        }\n        if (data.type === 'leave') {\n          new Notification('User left', {\n            body: `${data.user} left the room.`\n          });\n        }\n      }\n      if (userInteracted) {\n        const audio = new Audio(NOTIFICATION_SOUND_URL);\n        audio.play().catch(() => {});\n      }\n    });\n    socket.on('message_ack', ack => {\n      setPendingMessages(prev => prev.filter(pm => pm._clientId !== ack._clientId));\n    });\n\n    // Listen for reactions\n    socket.on('message_reaction', ({\n      msgId,\n      reaction,\n      user\n    }) => {\n      setMessages(prev => prev.map(m => m._id === msgId ? {\n        ...m,\n        reactions: [...(m.reactions || []), {\n          reaction,\n          user\n        }]\n      } : m));\n    });\n    return () => {\n      socket.disconnect();\n    };\n  }, [name, room, avatar, userInteracted]);\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n    const handleFocus = async () => {\n      setUnreadCount(0);\n      await fetch(`${API_URL}/api/messages/read`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          room,\n          username: name\n        })\n      });\n      const res = await fetch(`${API_URL}/api/messages?room=${room}`);\n      const data = await res.json();\n      setMessages([...data, ...pendingMessages.filter(pm => !data.some(m => m._clientId === pm._clientId))]);\n    };\n    window.addEventListener('focus', handleFocus);\n    return () => window.removeEventListener('focus', handleFocus);\n  }, [messages, room, name, pendingMessages]);\n  useEffect(() => {\n    if (unreadCount > 0) {\n      document.title = `(${unreadCount}) New messages`;\n    } else {\n      document.title = `Chat Room - ${room}`;\n    }\n  }, [unreadCount, room]);\n  const loadOlderMessages = async () => {\n    if (messages.length === 0) return;\n    setLoadingOlder(true);\n    const oldest = messages[0].timestamp;\n    try {\n      const res = await fetch(`${API_URL}/api/messages?room=${room}&before=${encodeURIComponent(oldest)}`);\n      const data = await res.json();\n      if (data.length === 0) setHasMore(false);\n      setMessages(prev => [...data, ...prev]);\n      setTimeout(() => {\n        var _firstMessageRef$curr;\n        (_firstMessageRef$curr = firstMessageRef.current) === null || _firstMessageRef$curr === void 0 ? void 0 : _firstMessageRef$curr.scrollIntoView({\n          behavior: 'smooth',\n          block: 'start'\n        });\n      }, 100);\n    } catch (err) {}\n    setLoadingOlder(false);\n  };\n  const startRecording = async () => {\n    if (!navigator.mediaDevices) {\n      alert('Audio recording not supported in this browser.');\n      return;\n    }\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: true\n    });\n    const recorder = new window.MediaRecorder(stream);\n    setMediaRecorder(recorder);\n    setAudioChunks([]);\n    setRecordingTime(0);\n    recorder.start();\n    setRecording(true);\n    recordingIntervalRef.current = setInterval(() => {\n      setRecordingTime(prev => prev + 1);\n    }, 1000);\n    recorder.ondataavailable = e => {\n      setAudioChunks(prev => [...prev, e.data]);\n    };\n    recorder.onstop = () => {\n      clearInterval(recordingIntervalRef.current);\n      const audioBlob = new Blob(audioChunks, {\n        type: 'audio/webm'\n      });\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        sendMessage('', null, reader.result, true);\n      };\n      reader.readAsDataURL(audioBlob);\n      setRecording(false);\n      setMediaRecorder(null);\n      setAudioChunks([]);\n      setRecordingTime(0);\n    };\n  };\n  const stopRecording = () => {\n    if (mediaRecorder) {\n      mediaRecorder.stop();\n    }\n    clearInterval(recordingIntervalRef.current);\n  };\n  const handleDeleteMessage = async msgId => {\n    if (!msgId) return;\n    try {\n      await fetch(`${API_URL}/api/messages/${msgId}`, {\n        method: 'DELETE'\n      });\n      setMessages(prev => prev.filter(m => m._id !== msgId));\n      setHighlightedMsgId(null);\n    } catch (err) {\n      alert('Failed to delete message');\n    }\n  };\n  const handleEditMessage = async (msgId, newText) => {\n    if (!msgId) return;\n    try {\n      await fetch(`${API_URL}/api/messages/${msgId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message: newText\n        })\n      });\n      setMessages(prev => prev.map(m => m._id === msgId ? {\n        ...m,\n        message: newText\n      } : m));\n      setEditingMsgId(null);\n    } catch (err) {\n      alert('Failed to edit message');\n    }\n  };\n\n  // Send reaction\n  const sendReaction = (msgId, reaction) => {\n    socketRef.current.emit('message_reaction', {\n      msgId,\n      reaction,\n      user: name,\n      room\n    });\n    setHighlightedMsgId(null);\n  };\n\n  // Send message (support file upload)\n  const sendMessage = (msg = message, img = null, voice = null, fromVoice = false, file = null) => {\n    if (msg || img || voice || file) {\n      const _clientId = Date.now() + Math.random().toString(36).substr(2, 9);\n      if (recipient) {\n        const msgData = {\n          sender: name,\n          recipient,\n          message: msg,\n          image: img ? null : null,\n          voice: voice || null,\n          file: file ? null : null,\n          _clientId\n        };\n        if (img) {\n          const reader = new FileReader();\n          reader.onloadend = () => {\n            socketRef.current.emit('private_message', {\n              ...msgData,\n              image: reader.result\n            });\n            setPendingMessages(prev => [...prev, {\n              ...msgData,\n              image: reader.result\n            }]);\n            setMessage('');\n          };\n          reader.readAsDataURL(img);\n          return;\n        }\n        if (file) {\n          const reader = new FileReader();\n          reader.onloadend = () => {\n            socketRef.current.emit('private_message', {\n              ...msgData,\n              file: {\n                name: file.name,\n                url: reader.result\n              }\n            });\n            setPendingMessages(prev => [...prev, {\n              ...msgData,\n              file: {\n                name: file.name,\n                url: reader.result\n              }\n            }]);\n            setMessage('');\n          };\n          reader.readAsDataURL(file);\n          return;\n        }\n        socketRef.current.emit('private_message', msgData);\n        setPendingMessages(prev => [...prev, msgData]);\n        setMessage('');\n      } else {\n        if (img) {\n          const reader = new FileReader();\n          reader.onloadend = () => {\n            const msgData = {\n              sender: name,\n              room,\n              message: msg,\n              image: reader.result,\n              voice: null,\n              file: null,\n              timestamp: new Date().toISOString(),\n              _clientId\n            };\n            socketRef.current.emit('send_message', msgData);\n            setPendingMessages(prev => [...prev, msgData]);\n            setMessage('');\n          };\n          reader.readAsDataURL(img);\n          return;\n        }\n        if (file) {\n          const reader = new FileReader();\n          reader.onloadend = () => {\n            const msgData = {\n              sender: name,\n              room,\n              message: msg,\n              image: null,\n              voice: null,\n              file: {\n                name: file.name,\n                url: reader.result\n              },\n              timestamp: new Date().toISOString(),\n              _clientId\n            };\n            socketRef.current.emit('send_message', msgData);\n            setPendingMessages(prev => [...prev, msgData]);\n            setMessage('');\n          };\n          reader.readAsDataURL(file);\n          return;\n        }\n        if (voice) {\n          const msgData = {\n            sender: name,\n            room,\n            message: msg,\n            image: null,\n            voice: voice,\n            file: null,\n            timestamp: new Date().toISOString(),\n            _clientId\n          };\n          socketRef.current.emit('send_message', msgData);\n          setPendingMessages(prev => [...prev, msgData]);\n          if (fromVoice) setMessage('');\n          return;\n        }\n        if (msg) {\n          const msgData = {\n            sender: name,\n            room,\n            message: msg,\n            image: null,\n            voice: null,\n            file: null,\n            timestamp: new Date().toISOString(),\n            _clientId\n          };\n          socketRef.current.emit('send_message', msgData);\n          setPendingMessages(prev => [...prev, msgData]);\n          setMessage('');\n        }\n      }\n    }\n    socketRef.current.emit('typing', {\n      username: name,\n      room,\n      isTyping: false\n    });\n    setIsSenderTyping(false);\n  };\n  const handleSearch = async e => {\n    e.preventDefault();\n    if (!searchTerm.trim()) return;\n    const res = await fetch(`${API_URL}/api/search?room=${room}&q=${encodeURIComponent(searchTerm)}`);\n    const data = await res.json();\n    setSearchResults(data);\n  };\n  const handleBack = () => {\n    if (onLeave) onLeave();\n    navigate('/join');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [!isConnected && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#ffeaa7',\n        color: '#d35400',\n        padding: '8px',\n        textAlign: 'center',\n        fontWeight: 'bold'\n      },\n      children: \"Disconnected. Trying to reconnect...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 9\n    }, this), isReconnecting && isConnected && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#dfe6e9',\n        color: '#636e72',\n        padding: '8px',\n        textAlign: 'center',\n        fontWeight: 'bold'\n      },\n      children: \"Reconnecting...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"emoji-bg emoji1\",\n        children: \"\\uD83D\\uDCAC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"emoji-bg emoji2\",\n        children: \"\\u2728\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"emoji-bg emoji3\",\n        children: \"\\uD83D\\uDE80\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"emoji-bg emoji4\",\n        children: \"\\uD83D\\uDE03\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"emoji-bg emoji5\",\n        children: \"\\uD83C\\uDF89\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 9\n      }, this), showEmojiPicker && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"emoji-picker-popup\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"emoji-close-btn\",\n          \"aria-label\": \"Close emoji picker\",\n          onClick: () => setShowEmojiPicker(false),\n          children: \"\\u2716\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(EmojiPicker, {\n          onEmojiClick: emojiData => setMessage(message + emojiData.emoji),\n          theme: \"light\",\n          width: 320\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"send-button\",\n        onClick: handleBack,\n        children: \"\\u2B05 Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Room: \", room]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSearch,\n        style: {\n          margin: '10px 0',\n          display: 'flex',\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: searchTerm,\n          onChange: e => setSearchTerm(e.target.value),\n          placeholder: \"Search messages...\",\n          style: {\n            padding: '6px 12px',\n            borderRadius: 8,\n            border: '1px solid #b2bec3',\n            flex: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"send-button\",\n          style: {\n            padding: '6px 16px',\n            borderRadius: 8\n          },\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 9\n      }, this), searchResults.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 12,\n          background: '#dfe6e9',\n          borderRadius: 8,\n          padding: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 'bold',\n            marginBottom: 6\n          },\n          children: \"Search Results:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 13\n        }, this), searchResults.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 8,\n            paddingBottom: 6,\n            borderBottom: '1px solid #b2bec3'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontWeight: 'bold',\n              color: '#0984e3'\n            },\n            children: msg.sender\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 17\n          }, this), \": \", msg.message, /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginLeft: 8,\n              color: '#636e72',\n              fontSize: '0.9em'\n            },\n            children: msg.timestamp && new Date(msg.timestamp).toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 17\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"send-button\",\n          style: {\n            marginTop: 10\n          },\n          onClick: () => setSearchResults([]),\n          children: \"Back to Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: '10px 0 10px 0',\n          padding: '6px 16px',\n          background: '#f1f2f6',\n          borderRadius: '12px',\n          color: '#636e72',\n          fontSize: '0.98rem',\n          fontWeight: 'bold',\n          display: 'flex',\n          alignItems: 'center',\n          gap: 10,\n          flexWrap: 'wrap'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"online\",\n          children: \"\\uD83D\\uDFE2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 11\n        }, this), \"Online: \", onlineUsers.map(u => /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: u === name ? '#6c5ce7' : '#636e72',\n            fontWeight: u === name ? 'bold' : 'normal',\n            marginRight: 8\n          },\n          children: [u, u === name ? ' (You)' : '']\n        }, u, true, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 10,\n          display: 'flex',\n          alignItems: 'center',\n          flexWrap: 'wrap',\n          justifyContent: 'flex-start'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"recipient\",\n          style: {\n            marginLeft: 22,\n            marginRight: 22,\n            whiteSpace: 'nowrap',\n            fontWeight: 400,\n            fontSize: '1rem'\n          },\n          children: \"Send private message to:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"recipient\",\n          value: recipient,\n          onChange: e => setRecipient(e.target.value),\n          style: {\n            padding: '4px 8px',\n            borderRadius: 6\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"-- None --\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 13\n          }, this), onlineUsers.filter(u => u !== name).map(u => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: u,\n            children: u\n          }, u, false, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 11\n        }, this), recipient && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"private-mode-text\",\n          children: \"(Private mode)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 9\n      }, this), isSenderTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"typing-indicator\",\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 6\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"typing\",\n          children: \"\\uD83D\\uDCAC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 13\n        }, this), \"You are typing\", /*#__PURE__*/_jsxDEV(TypingDots, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 11\n      }, this), typingUser && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"typing-indicator\",\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 6\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"typing\",\n          children: \"\\uD83D\\uDCAC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 594,\n          columnNumber: 13\n        }, this), typingUser, \" is typing\", /*#__PURE__*/_jsxDEV(TypingDots, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 35\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 11\n      }, this), unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"unread-badge\",\n        children: [unreadCount, \" unread message\", unreadCount > 1 ? 's' : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          margin: '10px 0'\n        },\n        children: hasMore ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"load-older-btn\",\n          onClick: loadOlderMessages,\n          disabled: loadingOlder,\n          children: loadingOlder ? 'Loading...' : 'Load Older Messages'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: '#636e72',\n            fontSize: '0.95rem'\n          },\n          children: \"No more messages\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages\",\n        style: {\n          minHeight: 0,\n          flex: 1,\n          width: '100%',\n          overflowY: 'auto',\n          padding: '20px 8px 0 8px'\n        },\n        children: [messages.map((msg, i) => {\n          const isUser = msg.sender === name;\n          const isFirst = i === 0;\n          const isPending = pendingMessages.some(pm => pm._clientId === msg._clientId);\n          const isHighlighted = highlightedMsgId === msg._id;\n          const isEditing = editingMsgId === msg._id;\n          const handleMouseDown = () => {\n            longPressTimerRef.current = setTimeout(() => setHighlightedMsgId(msg._id), 600);\n          };\n          const handleMouseUp = () => {\n            clearTimeout(longPressTimerRef.current);\n          };\n          const handleMouseLeave = () => {\n            clearTimeout(longPressTimerRef.current);\n          };\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `message ${isUser ? 'sent' : 'received'}${isHighlighted ? ' highlighted' : ''}`,\n            style: {\n              display: 'flex',\n              alignItems: 'flex-start',\n              marginBottom: 12,\n              opacity: isPending ? 0.5 : 1,\n              maxWidth: '100vw',\n              background: isHighlighted ? '#ffeaa7' : undefined,\n              border: isHighlighted ? '2px solid #fdcb6e' : undefined,\n              transition: 'background 0.2s, border 0.2s'\n            },\n            ref: isFirst ? firstMessageRef : null,\n            onMouseDown: handleMouseDown,\n            onMouseUp: handleMouseUp,\n            onMouseLeave: handleMouseLeave,\n            onTouchStart: handleMouseDown,\n            onTouchEnd: handleMouseUp,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: msg.avatar || 'https://api.dicebear.com/7.x/bottts/svg?seed=User',\n              alt: \"avatar\",\n              className: \"avatar-img\",\n              style: {\n                width: 36,\n                height: 36,\n                borderRadius: '50%',\n                objectFit: 'cover',\n                marginRight: 10,\n                border: '2px solid #764ba2',\n                background: '#fff'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 661,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bubble\",\n              style: {\n                maxWidth: '90vw',\n                wordBreak: 'break-word',\n                overflowWrap: 'break-word'\n              },\n              children: [msg.private && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"private-mode-text\",\n                children: \"Private message\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 677,\n                columnNumber: 21\n              }, this), isEditing ? /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: e => {\n                  e.preventDefault();\n                  handleEditMessage(msg._id, editingText);\n                },\n                style: {\n                  marginBottom: 8\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: editingText,\n                  onChange: e => setEditingText(e.target.value),\n                  style: {\n                    width: '80%',\n                    padding: 4,\n                    borderRadius: 6,\n                    border: '1px solid #b2bec3'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 689,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  className: \"send-button\",\n                  style: {\n                    marginLeft: 8\n                  },\n                  children: \"Save\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 695,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"send-button\",\n                  style: {\n                    marginLeft: 4,\n                    background: '#636e72'\n                  },\n                  onClick: () => setEditingMsgId(null),\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 696,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 682,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [msg.message && /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: msg.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 700,\n                  columnNumber: 39\n                }, this), !msg.message && msg.image && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontStyle: 'italic',\n                    color: '#888',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 4\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    role: \"img\",\n                    \"aria-label\": \"image\",\n                    children: \"\\uD83D\\uDDBC\\uFE0F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 703,\n                    columnNumber: 27\n                  }, this), \" Image\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 702,\n                  columnNumber: 25\n                }, this), !msg.message && msg.voice && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontStyle: 'italic',\n                    color: '#888',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 4\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    role: \"img\",\n                    \"aria-label\": \"voice\",\n                    children: \"\\uD83C\\uDFA4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 708,\n                    columnNumber: 27\n                  }, this), \" Voice note\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 707,\n                  columnNumber: 25\n                }, this), msg.file && msg.file.url && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: 8\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    role: \"img\",\n                    \"aria-label\": \"file\",\n                    children: \"\\uD83D\\uDCCE\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 714,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: msg.file.url,\n                    download: msg.file.name,\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    style: {\n                      color: '#0984e3',\n                      textDecoration: 'underline',\n                      marginLeft: 4\n                    },\n                    children: msg.file.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 715,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 713,\n                  columnNumber: 25\n                }, this), msg.image && /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: msg.image,\n                  download: `chat-image-${i}.png`,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: msg.image,\n                    alt: \"sent\",\n                    className: \"chat-image\",\n                    style: {\n                      maxWidth: '90vw',\n                      maxHeight: 120,\n                      borderRadius: 10,\n                      marginTop: 8,\n                      display: 'block',\n                      cursor: 'pointer'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 722,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 721,\n                  columnNumber: 25\n                }, this), msg.voice && msg.voice.startsWith('data:audio') && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 6,\n                    marginTop: 8\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    role: \"img\",\n                    \"aria-label\": \"play\",\n                    children: \"\\uD83D\\uDD0A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 732,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n                    controls: true,\n                    style: {\n                      width: '90vw',\n                      maxWidth: 240\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"source\", {\n                      src: msg.voice,\n                      type: \"audio/webm\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 734,\n                      columnNumber: 29\n                    }, this), \"Your browser does not support audio.\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 733,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 731,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"timestamp\",\n                  children: msg.timestamp && new Date(msg.timestamp).toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 739,\n                  columnNumber: 23\n                }, this), isPending && /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: '#fdcb6e',\n                    marginLeft: 8,\n                    fontSize: '0.9em'\n                  },\n                  children: \"Sending...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 741,\n                  columnNumber: 25\n                }, this), isUser && msg.readBy && /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: '#00b894',\n                    fontSize: '0.9em',\n                    marginLeft: 8\n                  },\n                  children: msg.readBy.length === onlineUsers.length - 1 ? '✔✔ Read' : '✔ Sent'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 746,\n                  columnNumber: 25\n                }, this), isHighlighted && msg._id && !isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: 8,\n                    display: 'flex',\n                    gap: 8\n                  },\n                  children: [isUser && /*#__PURE__*/_jsxDEV(\"button\", {\n                    style: {\n                      background: '#00b894',\n                      color: '#fff',\n                      border: 'none',\n                      borderRadius: 6,\n                      padding: '4px 12px',\n                      cursor: 'pointer'\n                    },\n                    onClick: () => {\n                      setEditingMsgId(msg._id);\n                      setEditingText(msg.message);\n                    },\n                    children: \"Edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 754,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    style: {\n                      background: '#d63031',\n                      color: '#fff',\n                      border: 'none',\n                      borderRadius: 6,\n                      padding: '4px 12px',\n                      cursor: 'pointer'\n                    },\n                    onClick: () => handleDeleteMessage(msg._id),\n                    children: \"Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 771,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      gap: 4\n                    },\n                    children: REACTIONS.map(r => /*#__PURE__*/_jsxDEV(\"button\", {\n                      style: {\n                        background: '#fff',\n                        border: '1px solid #b2bec3',\n                        borderRadius: 6,\n                        padding: '2px 8px',\n                        cursor: 'pointer',\n                        fontSize: '1.2em'\n                      },\n                      onClick: () => sendReaction(msg._id, r),\n                      title: `React with ${r}`,\n                      children: r\n                    }, r, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 787,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 785,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 752,\n                  columnNumber: 25\n                }, this), msg.reactions && msg.reactions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: 6,\n                    display: 'flex',\n                    gap: 8,\n                    flexWrap: 'wrap'\n                  },\n                  children: REACTIONS.map(r => {\n                    const count = msg.reactions.filter(rx => rx.reaction === r).length;\n                    return count > 0 ? /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        background: '#dfe6e9',\n                        borderRadius: 8,\n                        padding: '2px 8px',\n                        fontSize: '1.1em'\n                      },\n                      children: [r, \" \", count]\n                    }, r, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 812,\n                      columnNumber: 31\n                    }, this) : null;\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 808,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 675,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 15\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 825,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 10,\n          flexWrap: 'nowrap',\n          overflowX: 'auto',\n          paddingBottom: 'env(safe-area-inset-bottom, 24px)',\n          marginBottom: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"message-input\",\n          type: \"text\",\n          name: \"chat-message\",\n          placeholder: \"Type message...\",\n          value: message,\n          onChange: e => {\n            setMessage(e.target.value);\n            socketRef.current.emit('typing', {\n              username: name,\n              room,\n              isTyping: e.target.value.length > 0\n            });\n            setIsSenderTyping(e.target.value.length > 0);\n          },\n          onKeyDown: e => e.key === 'Enter' && sendMessage(),\n          style: {\n            flex: '1 1 auto',\n            minWidth: 80,\n            paddingBottom: 12,\n            fontSize: '1.05em'\n          },\n          autoComplete: \"off\",\n          autoCorrect: \"on\",\n          spellCheck: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 840,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"icon-button\",\n          title: \"Add emoji\",\n          onClick: () => setShowEmojiPicker(!showEmojiPicker),\n          style: {\n            flex: '0 0 auto'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"emoji\",\n            children: \"\\uD83D\\uDE03\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 868,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 862,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          name: \"chat-image\",\n          ref: fileInputRef,\n          onChange: e => {\n            if (e.target.files[0]) {\n              sendMessage('', e.target.files[0], null);\n              e.target.value = '';\n            }\n          },\n          hidden: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 871,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"icon-button\",\n          onClick: () => fileInputRef.current.click(),\n          title: \"Send image\",\n          style: {\n            flex: '0 0 auto'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"camera\",\n            children: \"\\uD83D\\uDCF7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 885,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 884,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.txt,.zip,.rar,.csv,application/*\",\n          style: {\n            display: 'none'\n          },\n          id: \"file-upload\",\n          onChange: e => {\n            if (e.target.files[0]) {\n              sendMessage('', null, null, false, e.target.files[0]);\n              e.target.value = '';\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 888,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"icon-button\",\n          title: \"Send file\",\n          style: {\n            flex: '0 0 auto'\n          },\n          onClick: () => document.getElementById('file-upload').click(),\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"file\",\n            children: \"\\uD83D\\uDCCE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 906,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 900,\n          columnNumber: 11\n        }, this), !recording ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"icon-button\",\n          onClick: startRecording,\n          title: \"Record voice note\",\n          style: {\n            flex: '0 0 auto'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"mic\",\n            children: \"\\uD83C\\uDF99\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 911,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 910,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"icon-button\",\n          onClick: stopRecording,\n          style: {\n            color: 'red',\n            flex: '0 0 auto'\n          },\n          title: \"Stop recording\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"stop\",\n            children: \"\\u23F9\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 915,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 914,\n          columnNumber: 13\n        }, this), recording && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            marginLeft: 10,\n            color: '#e17055',\n            fontWeight: 'bold',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 4,\n            flex: '0 0 auto'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"timer\",\n            children: \"\\u23F1\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 920,\n            columnNumber: 15\n          }, this), \" \", recordingTime, \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 919,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"send-button\",\n          onClick: () => sendMessage(),\n          style: {\n            flex: '0 0 auto'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"send\",\n            children: \"\\uD83D\\uDCE4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 924,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 923,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 828,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 460,\n    columnNumber: 5\n  }, this);\n};\n_s2(Chat, \"rbvfLreYDP292qpa+f+w2K2f8q4=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c2 = Chat;\nexport default Chat;\nvar _c, _c2;\n$RefreshReg$(_c, \"TypingDots\");\n$RefreshReg$(_c2, \"Chat\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useLocation","useNavigate","io","queryString","EmojiPicker","jsxDEV","_jsxDEV","Fragment","_Fragment","NOTIFICATION_SOUND_URL","NAMESPACE","API_URL","REACTIONS","TypingDots","_s","dots","setDots","interval","setInterval","prev","length","clearInterval","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","Chat","onLeave","_s2","search","navigate","params","parse","name","localStorage","getItem","room","avatar","message","setMessage","messages","setMessages","recording","setRecording","mediaRecorder","setMediaRecorder","audioChunks","setAudioChunks","recordingTime","setRecordingTime","typingUser","setTypingUser","isSenderTyping","setIsSenderTyping","onlineUsers","setOnlineUsers","recipient","setRecipient","showEmojiPicker","setShowEmojiPicker","unreadCount","setUnreadCount","userInteracted","setUserInteracted","loadingOlder","setLoadingOlder","hasMore","setHasMore","isConnected","setIsConnected","isReconnecting","setIsReconnecting","pendingMessages","setPendingMessages","searchTerm","setSearchTerm","searchResults","setSearchResults","highlightedMsgId","setHighlightedMsgId","editingMsgId","setEditingMsgId","editingText","setEditingText","fileType","setFileType","recordingIntervalRef","fileInputRef","messagesEndRef","firstMessageRef","socketRef","longPressTimerRef","fetchMessages","res","fetch","data","json","err","setInteracted","window","addEventListener","once","removeEventListener","Notification","permission","requestPermission","current","transports","reconnection","reconnectionAttempts","reconnectionDelay","socket","emit","on","filter","pm","_clientId","m","sender","audio","Audio","play","catch","body","file","document","hidden","c","title","username","isTyping","users","type","user","ack","msgId","reaction","map","_id","reactions","disconnect","_messagesEndRef$curre","scrollIntoView","behavior","handleFocus","method","headers","JSON","stringify","some","loadOlderMessages","oldest","timestamp","encodeURIComponent","setTimeout","_firstMessageRef$curr","block","startRecording","navigator","mediaDevices","alert","stream","getUserMedia","recorder","MediaRecorder","start","ondataavailable","e","onstop","audioBlob","Blob","reader","FileReader","onloadend","sendMessage","result","readAsDataURL","stopRecording","stop","handleDeleteMessage","handleEditMessage","newText","sendReaction","msg","img","voice","fromVoice","Date","now","Math","random","toString","substr","msgData","image","url","toISOString","handleSearch","preventDefault","trim","handleBack","className","style","background","color","padding","textAlign","fontWeight","onClick","onEmojiClick","emojiData","emoji","theme","width","onSubmit","margin","display","gap","value","onChange","target","placeholder","borderRadius","border","flex","marginBottom","i","paddingBottom","borderBottom","marginLeft","fontSize","toLocaleString","marginTop","alignItems","flexWrap","role","u","marginRight","justifyContent","htmlFor","whiteSpace","id","disabled","minHeight","overflowY","isUser","isFirst","isPending","isHighlighted","isEditing","handleMouseDown","handleMouseUp","clearTimeout","handleMouseLeave","opacity","maxWidth","undefined","transition","ref","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","src","alt","height","objectFit","wordBreak","overflowWrap","private","fontStyle","href","download","rel","textDecoration","maxHeight","cursor","startsWith","controls","readBy","r","count","rx","overflowX","onKeyDown","key","minWidth","autoComplete","autoCorrect","spellCheck","accept","files","click","getElementById","_c2","$RefreshReg$"],"sources":["C:/Users/User/OneDrive/Desktop/socket/client/src/components/Chat/Chat.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { io } from 'socket.io-client';\r\nimport queryString from 'query-string';\r\nimport EmojiPicker from 'emoji-picker-react';\r\nimport './Chat.css';\r\n\r\nconst NOTIFICATION_SOUND_URL = \"https://assets.mixkit.co/sfx/preview/mixkit-bell-notification-933.mp3\";\r\nconst NAMESPACE = '/chat';\r\nconst API_URL = 'http://192.168.0.203:5000';\r\n\r\nconst REACTIONS = ['👍', '❤️', '😂', '😮', '😢', '👏'];\r\n\r\nfunction TypingDots() {\r\n  const [dots, setDots] = useState('');\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setDots(prev => prev.length < 3 ? prev + '.' : '');\r\n    }, 400);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n  return <span>{dots}</span>;\r\n}\r\n\r\nconst Chat = ({ onLeave }) => {\r\n  const { search } = useLocation();\r\n  const navigate = useNavigate();\r\n  const params = queryString.parse(search);\r\n  const name = params.name || localStorage.getItem('chat_name');\r\n  const room = params.room || localStorage.getItem('chat_room');\r\n  const avatar = params.avatar || localStorage.getItem('chat_avatar');\r\n\r\n  useEffect(() => {\r\n    if (!name || !room) {\r\n      navigate('/');\r\n    }\r\n  }, [name, room, navigate]);\r\n\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n  const [recording, setRecording] = useState(false);\r\n  const [mediaRecorder, setMediaRecorder] = useState(null);\r\n  const [audioChunks, setAudioChunks] = useState([]);\r\n  const [recordingTime, setRecordingTime] = useState(0);\r\n  const [typingUser, setTypingUser] = useState('');\r\n  const [isSenderTyping, setIsSenderTyping] = useState(false);\r\n  const [onlineUsers, setOnlineUsers] = useState([]);\r\n  const [recipient, setRecipient] = useState('');\r\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [userInteracted, setUserInteracted] = useState(false);\r\n  const [loadingOlder, setLoadingOlder] = useState(false);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [isConnected, setIsConnected] = useState(true);\r\n  const [isReconnecting, setIsReconnecting] = useState(false);\r\n  const [pendingMessages, setPendingMessages] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [highlightedMsgId, setHighlightedMsgId] = useState(null);\r\n  const [editingMsgId, setEditingMsgId] = useState(null);\r\n  const [editingText, setEditingText] = useState('');\r\n  const [fileType, setFileType] = useState('');\r\n  const recordingIntervalRef = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n  const messagesEndRef = useRef(null);\r\n  const firstMessageRef = useRef(null);\r\n  const socketRef = useRef();\r\n  const longPressTimerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const fetchMessages = async () => {\r\n      try {\r\n        const res = await fetch(`${API_URL}/api/messages?room=${room}`);\r\n        const data = await res.json();\r\n        setMessages(data);\r\n      } catch (err) {}\r\n    };\r\n    fetchMessages();\r\n  }, [room]);\r\n\r\n  useEffect(() => {\r\n    const setInteracted = () => setUserInteracted(true);\r\n    window.addEventListener('click', setInteracted, { once: true });\r\n    window.addEventListener('keydown', setInteracted, { once: true });\r\n    return () => {\r\n      window.removeEventListener('click', setInteracted);\r\n      window.removeEventListener('keydown', setInteracted);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (Notification.permission !== 'granted') {\r\n      Notification.requestPermission();\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    socketRef.current = io(API_URL + NAMESPACE, {\r\n      transports: ['websocket'],\r\n      reconnection: true,\r\n      reconnectionAttempts: 5,\r\n      reconnectionDelay: 1000,\r\n    });\r\n    const socket = socketRef.current;\r\n    socket.emit('user_join', { name, room, avatar });\r\n\r\n    socket.on('connect', () => {\r\n      setIsConnected(true);\r\n      setIsReconnecting(false);\r\n    });\r\n\r\n    socket.on('disconnect', () => {\r\n      setIsConnected(false);\r\n      setIsReconnecting(true);\r\n    });\r\n\r\n    socket.on('reconnect_attempt', () => {\r\n      setIsReconnecting(true);\r\n    });\r\n\r\n    socket.on('reconnect', () => {\r\n      setIsConnected(true);\r\n      setIsReconnecting(false);\r\n    });\r\n\r\n    socket.on('receive_message', (data) => {\r\n      setPendingMessages(prev => prev.filter(pm => pm._clientId !== data._clientId));\r\n      setMessages((prev) => [\r\n        ...prev.filter(m => m._clientId !== data._clientId),\r\n        data\r\n      ]);\r\n      if (userInteracted && data.sender !== name) {\r\n        const audio = new Audio(NOTIFICATION_SOUND_URL);\r\n        audio.play().catch(() => {});\r\n      }\r\n      if (Notification.permission === 'granted' && data.sender !== name) {\r\n        new Notification(`New message from ${data.sender}`, { body: data.message || (data.file ? data.file.name : 'Media message') });\r\n      }\r\n      if (document.hidden) setUnreadCount(c => c + 1);\r\n    });\r\n\r\n    socket.on('push_notification', ({ title, body }) => {\r\n      if (Notification.permission === 'granted') {\r\n        new Notification(title, { body });\r\n      }\r\n    });\r\n\r\n    socket.on('typing', (data) => {\r\n      if (data.username !== name && data.isTyping) {\r\n        setTypingUser(data.username);\r\n      } else if (data.username === name && data.isTyping) {\r\n        setIsSenderTyping(true);\r\n      } else if (data.username === name && !data.isTyping) {\r\n        setIsSenderTyping(false);\r\n      } else if (!data.isTyping) {\r\n        setTypingUser('');\r\n      }\r\n    });\r\n\r\n    socket.on('active_users', (users) => {\r\n      setOnlineUsers(users);\r\n    });\r\n\r\n    socket.on('user_event', (data) => {\r\n      if (Notification.permission === 'granted') {\r\n        if (data.type === 'join') {\r\n          new Notification('User joined', { body: `${data.user} joined the room.` });\r\n        }\r\n        if (data.type === 'leave') {\r\n          new Notification('User left', { body: `${data.user} left the room.` });\r\n        }\r\n      }\r\n      if (userInteracted) {\r\n        const audio = new Audio(NOTIFICATION_SOUND_URL);\r\n        audio.play().catch(() => {});\r\n      }\r\n    });\r\n\r\n    socket.on('message_ack', (ack) => {\r\n      setPendingMessages(prev => prev.filter(pm => pm._clientId !== ack._clientId));\r\n    });\r\n\r\n    // Listen for reactions\r\n    socket.on('message_reaction', ({ msgId, reaction, user }) => {\r\n      setMessages(prev =>\r\n        prev.map(m =>\r\n          m._id === msgId\r\n            ? {\r\n                ...m,\r\n                reactions: [\r\n                  ...(m.reactions || []),\r\n                  { reaction, user }\r\n                ]\r\n              }\r\n            : m\r\n        )\r\n      );\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [name, room, avatar, userInteracted]);\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    const handleFocus = async () => {\r\n      setUnreadCount(0);\r\n      await fetch(`${API_URL}/api/messages/read`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ room, username: name }),\r\n      });\r\n      const res = await fetch(`${API_URL}/api/messages?room=${room}`);\r\n      const data = await res.json();\r\n      setMessages([\r\n        ...data,\r\n        ...pendingMessages.filter(pm => !data.some(m => m._clientId === pm._clientId))\r\n      ]);\r\n    };\r\n    window.addEventListener('focus', handleFocus);\r\n    return () => window.removeEventListener('focus', handleFocus);\r\n  }, [messages, room, name, pendingMessages]);\r\n\r\n  useEffect(() => {\r\n    if (unreadCount > 0) {\r\n      document.title = `(${unreadCount}) New messages`;\r\n    } else {\r\n      document.title = `Chat Room - ${room}`;\r\n    }\r\n  }, [unreadCount, room]);\r\n\r\n  const loadOlderMessages = async () => {\r\n    if (messages.length === 0) return;\r\n    setLoadingOlder(true);\r\n    const oldest = messages[0].timestamp;\r\n    try {\r\n      const res = await fetch(`${API_URL}/api/messages?room=${room}&before=${encodeURIComponent(oldest)}`);\r\n      const data = await res.json();\r\n      if (data.length === 0) setHasMore(false);\r\n      setMessages(prev => [...data, ...prev]);\r\n      setTimeout(() => {\r\n        firstMessageRef.current?.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n      }, 100);\r\n    } catch (err) {}\r\n    setLoadingOlder(false);\r\n  };\r\n\r\n  const startRecording = async () => {\r\n    if (!navigator.mediaDevices) {\r\n      alert('Audio recording not supported in this browser.');\r\n      return;\r\n    }\r\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n    const recorder = new window.MediaRecorder(stream);\r\n    setMediaRecorder(recorder);\r\n    setAudioChunks([]);\r\n    setRecordingTime(0);\r\n    recorder.start();\r\n    setRecording(true);\r\n\r\n    recordingIntervalRef.current = setInterval(() => {\r\n      setRecordingTime(prev => prev + 1);\r\n    }, 1000);\r\n\r\n    recorder.ondataavailable = (e) => {\r\n      setAudioChunks((prev) => [...prev, e.data]);\r\n    };\r\n\r\n    recorder.onstop = () => {\r\n      clearInterval(recordingIntervalRef.current);\r\n      const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        sendMessage('', null, reader.result, true);\r\n      };\r\n      reader.readAsDataURL(audioBlob);\r\n      setRecording(false);\r\n      setMediaRecorder(null);\r\n      setAudioChunks([]);\r\n      setRecordingTime(0);\r\n    };\r\n  };\r\n\r\n  const stopRecording = () => {\r\n    if (mediaRecorder) {\r\n      mediaRecorder.stop();\r\n    }\r\n    clearInterval(recordingIntervalRef.current);\r\n  };\r\n\r\n  const handleDeleteMessage = async (msgId) => {\r\n    if (!msgId) return;\r\n    try {\r\n      await fetch(`${API_URL}/api/messages/${msgId}`, { method: 'DELETE' });\r\n      setMessages(prev => prev.filter(m => m._id !== msgId));\r\n      setHighlightedMsgId(null);\r\n    } catch (err) {\r\n      alert('Failed to delete message');\r\n    }\r\n  };\r\n\r\n  const handleEditMessage = async (msgId, newText) => {\r\n    if (!msgId) return;\r\n    try {\r\n      await fetch(`${API_URL}/api/messages/${msgId}`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ message: newText }),\r\n      });\r\n      setMessages(prev =>\r\n        prev.map(m => m._id === msgId ? { ...m, message: newText } : m)\r\n      );\r\n      setEditingMsgId(null);\r\n    } catch (err) {\r\n      alert('Failed to edit message');\r\n    }\r\n  };\r\n\r\n  // Send reaction\r\n  const sendReaction = (msgId, reaction) => {\r\n    socketRef.current.emit('message_reaction', {\r\n      msgId,\r\n      reaction,\r\n      user: name,\r\n      room\r\n    });\r\n    setHighlightedMsgId(null);\r\n  };\r\n\r\n  // Send message (support file upload)\r\n  const sendMessage = (msg = message, img = null, voice = null, fromVoice = false, file = null) => {\r\n    if (msg || img || voice || file) {\r\n      const _clientId = Date.now() + Math.random().toString(36).substr(2, 9);\r\n      if (recipient) {\r\n        const msgData = {\r\n          sender: name,\r\n          recipient,\r\n          message: msg,\r\n          image: img ? null : null,\r\n          voice: voice || null,\r\n          file: file ? null : null,\r\n          _clientId\r\n        };\r\n        if (img) {\r\n          const reader = new FileReader();\r\n          reader.onloadend = () => {\r\n            socketRef.current.emit('private_message', { ...msgData, image: reader.result });\r\n            setPendingMessages(prev => [...prev, { ...msgData, image: reader.result }]);\r\n            setMessage('');\r\n          };\r\n          reader.readAsDataURL(img);\r\n          return;\r\n        }\r\n        if (file) {\r\n          const reader = new FileReader();\r\n          reader.onloadend = () => {\r\n            socketRef.current.emit('private_message', { ...msgData, file: { name: file.name, url: reader.result } });\r\n            setPendingMessages(prev => [...prev, { ...msgData, file: { name: file.name, url: reader.result } }]);\r\n            setMessage('');\r\n          };\r\n          reader.readAsDataURL(file);\r\n          return;\r\n        }\r\n        socketRef.current.emit('private_message', msgData);\r\n        setPendingMessages(prev => [...prev, msgData]);\r\n        setMessage('');\r\n      } else {\r\n        if (img) {\r\n          const reader = new FileReader();\r\n          reader.onloadend = () => {\r\n            const msgData = {\r\n              sender: name,\r\n              room,\r\n              message: msg,\r\n              image: reader.result,\r\n              voice: null,\r\n              file: null,\r\n              timestamp: new Date().toISOString(),\r\n              _clientId\r\n            };\r\n            socketRef.current.emit('send_message', msgData);\r\n            setPendingMessages(prev => [...prev, msgData]);\r\n            setMessage('');\r\n          };\r\n          reader.readAsDataURL(img);\r\n          return;\r\n        }\r\n        if (file) {\r\n          const reader = new FileReader();\r\n          reader.onloadend = () => {\r\n            const msgData = {\r\n              sender: name,\r\n              room,\r\n              message: msg,\r\n              image: null,\r\n              voice: null,\r\n              file: { name: file.name, url: reader.result },\r\n              timestamp: new Date().toISOString(),\r\n              _clientId\r\n            };\r\n            socketRef.current.emit('send_message', msgData);\r\n            setPendingMessages(prev => [...prev, msgData]);\r\n            setMessage('');\r\n          };\r\n          reader.readAsDataURL(file);\r\n          return;\r\n        }\r\n        if (voice) {\r\n          const msgData = {\r\n            sender: name,\r\n            room,\r\n            message: msg,\r\n            image: null,\r\n            voice: voice,\r\n            file: null,\r\n            timestamp: new Date().toISOString(),\r\n            _clientId\r\n          };\r\n          socketRef.current.emit('send_message', msgData);\r\n          setPendingMessages(prev => [...prev, msgData]);\r\n          if (fromVoice) setMessage('');\r\n          return;\r\n        }\r\n        if (msg) {\r\n          const msgData = {\r\n            sender: name,\r\n            room,\r\n            message: msg,\r\n            image: null,\r\n            voice: null,\r\n            file: null,\r\n            timestamp: new Date().toISOString(),\r\n            _clientId\r\n          };\r\n          socketRef.current.emit('send_message', msgData);\r\n          setPendingMessages(prev => [...prev, msgData]);\r\n          setMessage('');\r\n        }\r\n      }\r\n    }\r\n    socketRef.current.emit('typing', { username: name, room, isTyping: false });\r\n    setIsSenderTyping(false);\r\n  };\r\n\r\n  const handleSearch = async (e) => {\r\n    e.preventDefault();\r\n    if (!searchTerm.trim()) return;\r\n    const res = await fetch(`${API_URL}/api/search?room=${room}&q=${encodeURIComponent(searchTerm)}`);\r\n    const data = await res.json();\r\n    setSearchResults(data);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    if (onLeave) onLeave();\r\n    navigate('/join');\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat-container\">\r\n      {!isConnected && (\r\n        <div style={{ background: '#ffeaa7', color: '#d35400', padding: '8px', textAlign: 'center', fontWeight: 'bold' }}>\r\n          Disconnected. Trying to reconnect...\r\n        </div>\r\n      )}\r\n      {isReconnecting && isConnected && (\r\n        <div style={{ background: '#dfe6e9', color: '#636e72', padding: '8px', textAlign: 'center', fontWeight: 'bold' }}>\r\n          Reconnecting...\r\n        </div>\r\n      )}\r\n      <div className=\"chat-box\">\r\n        <span className=\"emoji-bg emoji1\">💬</span>\r\n        <span className=\"emoji-bg emoji2\">✨</span>\r\n        <span className=\"emoji-bg emoji3\">🚀</span>\r\n        <span className=\"emoji-bg emoji4\">😃</span>\r\n        <span className=\"emoji-bg emoji5\">🎉</span>\r\n        {showEmojiPicker && (\r\n          <div className=\"emoji-picker-popup\">\r\n            <button\r\n              className=\"emoji-close-btn\"\r\n              aria-label=\"Close emoji picker\"\r\n              onClick={() => setShowEmojiPicker(false)}\r\n            >\r\n              ✖\r\n            </button>\r\n            <EmojiPicker\r\n              onEmojiClick={(emojiData) => setMessage(message + emojiData.emoji)}\r\n              theme=\"light\"\r\n              width={320}\r\n            />\r\n          </div>\r\n        )}\r\n        <button className=\"send-button\" onClick={handleBack}>⬅ Back</button>\r\n        <h2>Room: {room}</h2>\r\n        <form onSubmit={handleSearch} style={{ margin: '10px 0', display: 'flex', gap: 8 }}>\r\n          <input\r\n            type=\"text\"\r\n            value={searchTerm}\r\n            onChange={e => setSearchTerm(e.target.value)}\r\n            placeholder=\"Search messages...\"\r\n            style={{ padding: '6px 12px', borderRadius: 8, border: '1px solid #b2bec3', flex: 1 }}\r\n          />\r\n          <button type=\"submit\" className=\"send-button\" style={{ padding: '6px 16px', borderRadius: 8 }}>\r\n            Search\r\n          </button>\r\n        </form>\r\n        {searchResults.length > 0 && (\r\n          <div style={{ marginBottom: 12, background: '#dfe6e9', borderRadius: 8, padding: 10 }}>\r\n            <div style={{ fontWeight: 'bold', marginBottom: 6 }}>Search Results:</div>\r\n            {searchResults.map((msg, i) => (\r\n              <div key={i} style={{ marginBottom: 8, paddingBottom: 6, borderBottom: '1px solid #b2bec3' }}>\r\n                <span style={{ fontWeight: 'bold', color: '#0984e3' }}>{msg.sender}</span>: {msg.message}\r\n                <span style={{ marginLeft: 8, color: '#636e72', fontSize: '0.9em' }}>\r\n                  {msg.timestamp && new Date(msg.timestamp).toLocaleString()}\r\n                </span>\r\n              </div>\r\n            ))}\r\n            <button\r\n              className=\"send-button\"\r\n              style={{ marginTop: 10 }}\r\n              onClick={() => setSearchResults([])}\r\n            >\r\n              Back to Chat\r\n            </button>\r\n          </div>\r\n        )}\r\n        <div style={{\r\n          margin: '10px 0 10px 0',\r\n          padding: '6px 16px',\r\n          background: '#f1f2f6',\r\n          borderRadius: '12px',\r\n          color: '#636e72',\r\n          fontSize: '0.98rem',\r\n          fontWeight: 'bold',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: 10,\r\n          flexWrap: 'wrap'\r\n        }}>\r\n          <span role=\"img\" aria-label=\"online\">🟢</span>\r\n          Online: {onlineUsers.map(u => (\r\n            <span key={u} style={{\r\n              color: u === name ? '#6c5ce7' : '#636e72',\r\n              fontWeight: u === name ? 'bold' : 'normal',\r\n              marginRight: 8\r\n            }}>\r\n              {u}{u === name ? ' (You)' : ''}\r\n            </span>\r\n          ))}\r\n        </div>\r\n        <div style={{\r\n          marginBottom: 10,\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          flexWrap: 'wrap',\r\n          justifyContent: 'flex-start'\r\n        }}>\r\n          <label htmlFor=\"recipient\" style={{\r\n            marginLeft: 22,\r\n            marginRight: 22,\r\n            whiteSpace: 'nowrap',\r\n            fontWeight: 400,\r\n            fontSize: '1rem'\r\n          }}>\r\n            Send private message to:\r\n          </label>\r\n          <select\r\n            id=\"recipient\"\r\n            value={recipient}\r\n            onChange={e => setRecipient(e.target.value)}\r\n            style={{ padding: '4px 8px', borderRadius: 6 }}\r\n          >\r\n            <option value=\"\">-- None --</option>\r\n            {onlineUsers.filter(u => u !== name).map(u => (\r\n              <option key={u} value={u}>{u}</option>\r\n            ))}\r\n          </select>\r\n          {recipient && (\r\n            <span className=\"private-mode-text\">\r\n              (Private mode)\r\n            </span>\r\n          )}\r\n        </div>\r\n        {/* Animated typing indicator for sender */}\r\n        {isSenderTyping && (\r\n          <div className=\"typing-indicator\" style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\r\n            <span role=\"img\" aria-label=\"typing\">💬</span>\r\n            You are typing<TypingDots />\r\n          </div>\r\n        )}\r\n        {/* Animated typing indicator for others */}\r\n        {typingUser && (\r\n          <div className=\"typing-indicator\" style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\r\n            <span role=\"img\" aria-label=\"typing\">💬</span>\r\n            {typingUser} is typing<TypingDots />\r\n          </div>\r\n        )}\r\n        {unreadCount > 0 && (\r\n          <div className=\"unread-badge\">\r\n            {unreadCount} unread message{unreadCount > 1 ? 's' : ''}\r\n          </div>\r\n        )}\r\n        <div style={{ textAlign: 'center', margin: '10px 0' }}>\r\n          {hasMore ? (\r\n            <button\r\n              className=\"load-older-btn\"\r\n              onClick={loadOlderMessages}\r\n              disabled={loadingOlder}\r\n            >\r\n              {loadingOlder ? 'Loading...' : 'Load Older Messages'}\r\n            </button>\r\n          ) : (\r\n            <span style={{ color: '#636e72', fontSize: '0.95rem' }}>No more messages</span>\r\n          )}\r\n        </div>\r\n        <div className=\"messages\" style={{\r\n          minHeight: 0,\r\n          flex: 1,\r\n          width: '100%',\r\n          overflowY: 'auto',\r\n          padding: '20px 8px 0 8px'\r\n        }}>\r\n          {messages.map((msg, i) => {\r\n            const isUser = msg.sender === name;\r\n            const isFirst = i === 0;\r\n            const isPending = pendingMessages.some(pm => pm._clientId === msg._clientId);\r\n            const isHighlighted = highlightedMsgId === msg._id;\r\n            const isEditing = editingMsgId === msg._id;\r\n\r\n            const handleMouseDown = () => {\r\n              longPressTimerRef.current = setTimeout(() => setHighlightedMsgId(msg._id), 600);\r\n            };\r\n            const handleMouseUp = () => {\r\n              clearTimeout(longPressTimerRef.current);\r\n            };\r\n            const handleMouseLeave = () => {\r\n              clearTimeout(longPressTimerRef.current);\r\n            };\r\n\r\n            return (\r\n              <div\r\n                key={i}\r\n                className={`message ${isUser ? 'sent' : 'received'}${isHighlighted ? ' highlighted' : ''}`}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'flex-start',\r\n                  marginBottom: 12,\r\n                  opacity: isPending ? 0.5 : 1,\r\n                  maxWidth: '100vw',\r\n                  background: isHighlighted ? '#ffeaa7' : undefined,\r\n                  border: isHighlighted ? '2px solid #fdcb6e' : undefined,\r\n                  transition: 'background 0.2s, border 0.2s'\r\n                }}\r\n                ref={isFirst ? firstMessageRef : null}\r\n                onMouseDown={handleMouseDown}\r\n                onMouseUp={handleMouseUp}\r\n                onMouseLeave={handleMouseLeave}\r\n                onTouchStart={handleMouseDown}\r\n                onTouchEnd={handleMouseUp}\r\n              >\r\n                <img\r\n                  src={msg.avatar || 'https://api.dicebear.com/7.x/bottts/svg?seed=User'}\r\n                  alt=\"avatar\"\r\n                  className=\"avatar-img\"\r\n                  style={{\r\n                    width: 36,\r\n                    height: 36,\r\n                    borderRadius: '50%',\r\n                    objectFit: 'cover',\r\n                    marginRight: 10,\r\n                    border: '2px solid #764ba2',\r\n                    background: '#fff'\r\n                  }}\r\n                />\r\n                <div className=\"bubble\" style={{ maxWidth: '90vw', wordBreak: 'break-word', overflowWrap: 'break-word' }}>\r\n                  {msg.private && (\r\n                    <div className=\"private-mode-text\">\r\n                      Private message\r\n                    </div>\r\n                  )}\r\n                  {isEditing ? (\r\n                    <form\r\n                      onSubmit={e => {\r\n                        e.preventDefault();\r\n                        handleEditMessage(msg._id, editingText);\r\n                      }}\r\n                      style={{ marginBottom: 8 }}\r\n                    >\r\n                      <input\r\n                        type=\"text\"\r\n                        value={editingText}\r\n                        onChange={e => setEditingText(e.target.value)}\r\n                        style={{ width: '80%', padding: 4, borderRadius: 6, border: '1px solid #b2bec3' }}\r\n                      />\r\n                      <button type=\"submit\" className=\"send-button\" style={{ marginLeft: 8 }}>Save</button>\r\n                      <button type=\"button\" className=\"send-button\" style={{ marginLeft: 4, background: '#636e72' }} onClick={() => setEditingMsgId(null)}>Cancel</button>\r\n                    </form>\r\n                  ) : (\r\n                    <>\r\n                      {msg.message && <div>{msg.message}</div>}\r\n                      {!msg.message && msg.image && (\r\n                        <div style={{fontStyle:'italic',color:'#888',display:'flex',alignItems:'center',gap:4}}>\r\n                          <span role=\"img\" aria-label=\"image\">🖼️</span> Image\r\n                        </div>\r\n                      )}\r\n                      {!msg.message && msg.voice && (\r\n                        <div style={{fontStyle:'italic',color:'#888',display:'flex',alignItems:'center',gap:4}}>\r\n                          <span role=\"img\" aria-label=\"voice\">🎤</span> Voice note\r\n                        </div>\r\n                      )}\r\n                      {/* File display */}\r\n                      {msg.file && msg.file.url && (\r\n                        <div style={{marginTop:8}}>\r\n                          <span role=\"img\" aria-label=\"file\">📎</span>\r\n                          <a href={msg.file.url} download={msg.file.name} target=\"_blank\" rel=\"noopener noreferrer\" style={{color:'#0984e3',textDecoration:'underline',marginLeft:4}}>\r\n                            {msg.file.name}\r\n                          </a>\r\n                        </div>\r\n                      )}\r\n                      {msg.image && (\r\n                        <a href={msg.image} download={`chat-image-${i}.png`} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                          <img\r\n                            src={msg.image}\r\n                            alt=\"sent\"\r\n                            className=\"chat-image\"\r\n                            style={{ maxWidth: '90vw', maxHeight: 120, borderRadius: 10, marginTop: 8, display: 'block', cursor: 'pointer' }}\r\n                          />\r\n                        </a>\r\n                      )}\r\n                      {msg.voice && msg.voice.startsWith('data:audio') && (\r\n                        <div style={{display:'flex',alignItems:'center',gap:6,marginTop:8}}>\r\n                          <span role=\"img\" aria-label=\"play\">🔊</span>\r\n                          <audio controls style={{ width: '90vw', maxWidth: 240 }}>\r\n                            <source src={msg.voice} type=\"audio/webm\" />\r\n                            Your browser does not support audio.\r\n                          </audio>\r\n                        </div>\r\n                      )}\r\n                      <div className=\"timestamp\">{msg.timestamp && new Date(msg.timestamp).toLocaleString()}</div>\r\n                      {isPending && (\r\n                        <span style={{ color: '#fdcb6e', marginLeft: 8, fontSize: '0.9em' }}>\r\n                          Sending...\r\n                        </span>\r\n                      )}\r\n                      {isUser && msg.readBy && (\r\n                        <span style={{ color: '#00b894', fontSize: '0.9em', marginLeft: 8 }}>\r\n                          {msg.readBy.length === onlineUsers.length - 1 ? '✔✔ Read' : '✔ Sent'}\r\n                        </span>\r\n                      )}\r\n                      {/* Show Edit for your own messages, Delete for any message, only on long press */}\r\n                      {isHighlighted && msg._id && !isEditing && (\r\n                        <div style={{ marginTop: 8, display: 'flex', gap: 8 }}>\r\n                          {isUser && (\r\n                            <button\r\n                              style={{\r\n                                background: '#00b894',\r\n                                color: '#fff',\r\n                                border: 'none',\r\n                                borderRadius: 6,\r\n                                padding: '4px 12px',\r\n                                cursor: 'pointer'\r\n                              }}\r\n                              onClick={() => {\r\n                                setEditingMsgId(msg._id);\r\n                                setEditingText(msg.message);\r\n                              }}\r\n                            >\r\n                              Edit\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            style={{\r\n                              background: '#d63031',\r\n                              color: '#fff',\r\n                              border: 'none',\r\n                              borderRadius: 6,\r\n                              padding: '4px 12px',\r\n                              cursor: 'pointer'\r\n                            }}\r\n                            onClick={() => handleDeleteMessage(msg._id)}\r\n                          >\r\n                            Delete\r\n                          </button>\r\n                          {/* Reaction bar */}\r\n                          <div style={{ display: 'flex', gap: 4 }}>\r\n                            {REACTIONS.map(r => (\r\n                              <button\r\n                                key={r}\r\n                                style={{\r\n                                  background: '#fff',\r\n                                  border: '1px solid #b2bec3',\r\n                                  borderRadius: 6,\r\n                                  padding: '2px 8px',\r\n                                  cursor: 'pointer',\r\n                                  fontSize: '1.2em'\r\n                                }}\r\n                                onClick={() => sendReaction(msg._id, r)}\r\n                                title={`React with ${r}`}\r\n                              >\r\n                                {r}\r\n                              </button>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      {/* Show reactions under message */}\r\n                      {msg.reactions && msg.reactions.length > 0 && (\r\n                        <div style={{ marginTop: 6, display: 'flex', gap: 8, flexWrap: 'wrap' }}>\r\n                          {REACTIONS.map(r => {\r\n                            const count = msg.reactions.filter(rx => rx.reaction === r).length;\r\n                            return count > 0 ? (\r\n                              <span key={r} style={{ background: '#dfe6e9', borderRadius: 8, padding: '2px 8px', fontSize: '1.1em' }}>\r\n                                {r} {count}\r\n                              </span>\r\n                            ) : null;\r\n                          })}\r\n                        </div>\r\n                      )}\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n        {/* Input group */}\r\n        <div\r\n          className=\"input-group\"\r\n          style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: 10,\r\n            flexWrap: 'nowrap',\r\n            overflowX: 'auto',\r\n            paddingBottom: 'env(safe-area-inset-bottom, 24px)',\r\n            marginBottom: 16\r\n          }}\r\n        >\r\n          <input\r\n            className=\"message-input\"\r\n            type=\"text\"\r\n            name=\"chat-message\"\r\n            placeholder=\"Type message...\"\r\n            value={message}\r\n            onChange={(e) => {\r\n              setMessage(e.target.value);\r\n              socketRef.current.emit('typing', { username: name, room, isTyping: e.target.value.length > 0 });\r\n              setIsSenderTyping(e.target.value.length > 0);\r\n            }}\r\n            onKeyDown={e => e.key === 'Enter' && sendMessage()}\r\n            style={{\r\n              flex: '1 1 auto',\r\n              minWidth: 80,\r\n              paddingBottom: 12,\r\n              fontSize: '1.05em'\r\n            }}\r\n            autoComplete=\"off\"\r\n            autoCorrect=\"on\"\r\n            spellCheck={true}\r\n          />\r\n          <button\r\n            className=\"icon-button\"\r\n            title=\"Add emoji\"\r\n            onClick={() => setShowEmojiPicker(!showEmojiPicker)}\r\n            style={{ flex: '0 0 auto' }}\r\n          >\r\n            <span role=\"img\" aria-label=\"emoji\">😃</span>\r\n          </button>\r\n          {/* Image upload */}\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            name=\"chat-image\"\r\n            ref={fileInputRef}\r\n            onChange={(e) => {\r\n              if (e.target.files[0]) {\r\n                sendMessage('', e.target.files[0], null);\r\n                e.target.value = '';\r\n              }\r\n            }}\r\n            hidden\r\n          />\r\n          <button className=\"icon-button\" onClick={() => fileInputRef.current.click()} title=\"Send image\" style={{ flex: '0 0 auto' }}>\r\n            <span role=\"img\" aria-label=\"camera\">📷</span>\r\n          </button>\r\n          {/* File upload (PDF, docs, etc) */}\r\n          <input\r\n            type=\"file\"\r\n            accept=\".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.txt,.zip,.rar,.csv,application/*\"\r\n            style={{ display: 'none' }}\r\n            id=\"file-upload\"\r\n            onChange={e => {\r\n              if (e.target.files[0]) {\r\n                sendMessage('', null, null, false, e.target.files[0]);\r\n                e.target.value = '';\r\n              }\r\n            }}\r\n          />\r\n          <button\r\n            className=\"icon-button\"\r\n            title=\"Send file\"\r\n            style={{ flex: '0 0 auto' }}\r\n            onClick={() => document.getElementById('file-upload').click()}\r\n          >\r\n            <span role=\"img\" aria-label=\"file\">📎</span>\r\n          </button>\r\n          {/* Voice recording and send button */}\r\n          {!recording ? (\r\n            <button className=\"icon-button\" onClick={startRecording} title=\"Record voice note\" style={{ flex: '0 0 auto' }}>\r\n              <span role=\"img\" aria-label=\"mic\">🎙️</span>\r\n            </button>\r\n          ) : (\r\n            <button className=\"icon-button\" onClick={stopRecording} style={{ color: 'red', flex: '0 0 auto' }} title=\"Stop recording\">\r\n              <span role=\"img\" aria-label=\"stop\">⏹️</span>\r\n            </button>\r\n          )}\r\n          {recording && (\r\n            <span style={{ marginLeft: 10, color: '#e17055', fontWeight: 'bold', display: 'flex', alignItems: 'center', gap: 4, flex: '0 0 auto' }}>\r\n              <span role=\"img\" aria-label=\"timer\">⏱️</span> {recordingTime}s\r\n            </span>\r\n          )}\r\n          <button className=\"send-button\" onClick={() => sendMessage()} style={{ flex: '0 0 auto' }}>\r\n            <span role=\"img\" aria-label=\"send\">📤</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}