{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\OneDrive\\\\Desktop\\\\socket\\\\client\\\\src\\\\components\\\\Chat\\\\Chat.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState, useRef, useCallback } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { io } from 'socket.io-client';\nimport queryString from 'query-string';\nimport EmojiPicker from 'emoji-picker-react';\nimport './Chat.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst NOTIFICATION_SOUND_URL = \"https://assets.mixkit.co/sfx/preview/mixkit-bell-notification-933.mp3\";\nconst NAMESPACE = '/chat';\n\n// ðŸŒ PRODUCTION-READY: Smart URL detection for cloud deployment\nconst getApiUrl = () => {\n  // Priority 1: Environment variables (set during deployment)\n  if (process.env.REACT_APP_API_URL) {\n    return process.env.REACT_APP_API_URL;\n  }\n\n  // Priority 2: Production auto-detection\n  if (process.env.NODE_ENV === 'production') {\n    // ðŸ”„ This will be automatically replaced with your actual backend URL\n    // Example: 'https://your-backend-name.onrender.com'\n    return window.location.origin.replace('netlify.app', 'onrender.com').replace(':3000', '');\n  }\n\n  // Priority 3: Development fallback\n  return 'http://localhost:5000';\n};\nconst API_URL = getApiUrl();\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || API_URL;\nconst REACTIONS = ['ðŸ‘', 'â¤ï¸', 'ðŸ˜‚', 'ðŸ˜®', 'ðŸ˜¢', 'ðŸ‘'];\nfunction TypingDots() {\n  _s();\n  const [dots, setDots] = useState('');\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setDots(prev => prev.length < 3 ? prev + '.' : '');\n    }, 400);\n    return () => clearInterval(interval);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    children: dots\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 10\n  }, this);\n}\n_s(TypingDots, \"x5A7Sg53ZjAlz59b/ycs4VK0Y+g=\");\n_c = TypingDots;\nconst Chat = ({\n  onLeave,\n  user\n}) => {\n  _s2();\n  const {\n    search\n  } = useLocation();\n  const navigate = useNavigate();\n\n  // Fix for undefined params issue - added safety checks\n  const params = queryString.parse(search) || {};\n  const name = params.name || (user === null || user === void 0 ? void 0 : user.email) || localStorage.getItem('chat_name') || '';\n  const room = params.room || localStorage.getItem('chat_room') || '';\n  const avatar = params.avatar || localStorage.getItem('chat_avatar') || null;\n  useEffect(() => {\n    if (!name || !room) {\n      navigate('/join');\n    }\n  }, [name, room, navigate]);\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [recording, setRecording] = useState(false);\n  const [mediaRecorder, setMediaRecorder] = useState(null);\n  const [audioChunks, setAudioChunks] = useState([]);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [typingUser, setTypingUser] = useState('');\n  const [isSenderTyping, setIsSenderTyping] = useState(false);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [recipient, setRecipient] = useState('');\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [userInteracted, setUserInteracted] = useState(false);\n  const [loadingOlder, setLoadingOlder] = useState(false);\n  const [hasMore, setHasMore] = useState(true);\n  const [isConnected, setIsConnected] = useState(true);\n  const [isReconnecting, setIsReconnecting] = useState(false);\n  const [pendingMessages, setPendingMessages] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [highlightedMsgId, setHighlightedMsgId] = useState(null);\n  const [editingMsgId, setEditingMsgId] = useState(null);\n  const [editingText, setEditingText] = useState('');\n  const [connectionError, setConnectionError] = useState(null);\n  const recordingIntervalRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const messagesEndRef = useRef(null);\n  const firstMessageRef = useRef(null);\n  const socketRef = useRef();\n  const longPressTimerRef = useRef(null);\n\n  // ðŸ”§ Development logging helper\n  const devLog = useCallback((message, ...args) => {\n    if (process.env.NODE_ENV === 'development') {\n      // eslint-disable-next-line no-console\n      console.log(message, ...args);\n    }\n  }, []);\n\n  // ðŸ”§ Error logging helper\n  const errorLog = useCallback((message, ...args) => {\n    if (process.env.NODE_ENV === 'development') {\n      // eslint-disable-next-line no-console\n      console.error(message, ...args);\n    }\n  }, []);\n\n  // Enhanced message fetching with error handling\n  useEffect(() => {\n    const fetchMessages = async () => {\n      try {\n        const res = await fetch(`${API_URL}/api/messages?room=${room}`);\n        if (res.ok) {\n          const data = await res.json();\n          setMessages((data === null || data === void 0 ? void 0 : data.messages) || data || []);\n        } else {\n          errorLog('Failed to fetch messages:', res.statusText);\n          setMessages([]);\n          if (res.status >= 500) {\n            setConnectionError('Server error. Please try again later.');\n          }\n        }\n      } catch (err) {\n        errorLog('Failed to fetch messages:', err);\n        setMessages([]);\n        setConnectionError('Network error. Check your connection.');\n      }\n    };\n    if (room) {\n      fetchMessages();\n    }\n  }, [room, errorLog]);\n  useEffect(() => {\n    const setInteracted = () => setUserInteracted(true);\n    window.addEventListener('click', setInteracted, {\n      once: true\n    });\n    window.addEventListener('keydown', setInteracted, {\n      once: true\n    });\n    return () => {\n      window.removeEventListener('click', setInteracted);\n      window.removeEventListener('keydown', setInteracted);\n    };\n  }, []);\n  useEffect(() => {\n    if (typeof Notification !== 'undefined' && Notification.permission !== 'granted') {\n      Notification.requestPermission();\n    }\n  }, []);\n\n  // Enhanced Socket.IO connection with better cloud performance\n  useEffect(() => {\n    if (!name || !room) return;\n    try {\n      devLog(`ðŸ”Œ Connecting to: ${SOCKET_URL}${NAMESPACE}`);\n      socketRef.current = io(SOCKET_URL + NAMESPACE, {\n        transports: ['websocket', 'polling'],\n        // Polling fallback for cloud\n        reconnection: true,\n        reconnectionAttempts: 15,\n        reconnectionDelay: 2000,\n        reconnectionDelayMax: 10000,\n        timeout: 30000,\n        // Increased for cloud latency\n        forceNew: true,\n        upgrade: true,\n        rememberUpgrade: true\n      });\n      const socket = socketRef.current;\n      if (socket && typeof socket.emit === 'function') {\n        socket.emit('user_join', {\n          name,\n          room,\n          avatar\n        });\n        socket.on('connect', () => {\n          devLog('âœ… Socket connected successfully');\n          setIsConnected(true);\n          setIsReconnecting(false);\n          setConnectionError(null);\n        });\n        socket.on('disconnect', reason => {\n          devLog('âŒ Socket disconnected:', reason);\n          setIsConnected(false);\n          if (reason === 'io server disconnect') {\n            setConnectionError('Server disconnected. Please refresh the page.');\n          } else {\n            setIsReconnecting(true);\n          }\n        });\n        socket.on('connect_error', error => {\n          errorLog('ðŸ”¥ Connection error:', error);\n          setConnectionError('Failed to connect to server. Please check your connection.');\n          setIsConnected(false);\n        });\n        socket.on('reconnect_attempt', attemptNumber => {\n          devLog(`ðŸ”„ Reconnection attempt ${attemptNumber}`);\n          setIsReconnecting(true);\n        });\n        socket.on('reconnect', attemptNumber => {\n          devLog(`âœ… Reconnected after ${attemptNumber} attempts`);\n          setIsConnected(true);\n          setIsReconnecting(false);\n          setConnectionError(null);\n          // Re-join room after reconnection\n          socket.emit('user_join', {\n            name,\n            room,\n            avatar\n          });\n        });\n        socket.on('reconnect_failed', () => {\n          errorLog('âŒ Failed to reconnect');\n          setConnectionError('Failed to reconnect. Please refresh the page.');\n          setIsReconnecting(false);\n        });\n        socket.on('receive_message', data => {\n          if (!data) return;\n          setPendingMessages(prev => prev.filter(pm => pm._clientId !== data._clientId));\n          setMessages(prev => [...prev.filter(m => m._clientId !== data._clientId), data]);\n          if (userInteracted && data.sender !== name) {\n            try {\n              const audio = new Audio(NOTIFICATION_SOUND_URL);\n              audio.play().catch(() => {});\n            } catch (err) {\n              errorLog('Audio play failed:', err);\n            }\n          }\n          if (typeof Notification !== 'undefined' && Notification.permission === 'granted' && data.sender !== name) {\n            var _data$file;\n            new Notification(`New message from ${data.sender}`, {\n              body: data.message || ((_data$file = data.file) === null || _data$file === void 0 ? void 0 : _data$file.name) || 'Media message'\n            });\n          }\n          if (document.hidden) setUnreadCount(c => c + 1);\n        });\n        socket.on('push_notification', ({\n          title,\n          body\n        }) => {\n          if (typeof Notification !== 'undefined' && Notification.permission === 'granted') {\n            new Notification(title, {\n              body\n            });\n          }\n        });\n        socket.on('typing', data => {\n          if (!data || !data.username) return;\n          if (data.username !== name && data.isTyping) {\n            setTypingUser(data.username);\n          } else if (data.username === name && data.isTyping) {\n            setIsSenderTyping(true);\n          } else if (data.username === name && !data.isTyping) {\n            setIsSenderTyping(false);\n          } else if (!data.isTyping) {\n            setTypingUser('');\n          }\n        });\n        socket.on('active_users', users => {\n          if (Array.isArray(users)) {\n            setOnlineUsers(users.map(u => typeof u === 'string' ? u : u.name).filter(Boolean));\n          } else {\n            setOnlineUsers([]);\n          }\n        });\n        socket.on('user_event', data => {\n          if (!data || !data.user) return;\n          if (typeof Notification !== 'undefined' && Notification.permission === 'granted') {\n            if (data.type === 'join') {\n              new Notification('User joined', {\n                body: `${data.user} joined the room.`\n              });\n            }\n            if (data.type === 'leave') {\n              new Notification('User left', {\n                body: `${data.user} left the room.`\n              });\n            }\n          }\n          if (userInteracted) {\n            try {\n              const audio = new Audio(NOTIFICATION_SOUND_URL);\n              audio.play().catch(() => {});\n            } catch (err) {\n              errorLog('Audio play failed:', err);\n            }\n          }\n        });\n        socket.on('message_ack', ack => {\n          if (!ack || !ack._clientId) return;\n          setPendingMessages(prev => prev.filter(pm => pm._clientId !== ack._clientId));\n        });\n        socket.on('message_reaction', ({\n          msgId,\n          reaction,\n          user: reactionUser\n        }) => {\n          if (!msgId || !reaction || !reactionUser) return;\n          setMessages(prev => prev.map(m => m._id === msgId ? {\n            ...m,\n            reactions: [...(m.reactions || []), {\n              reaction,\n              user: reactionUser\n            }]\n          } : m));\n        });\n        socket.on('error', error => {\n          errorLog('Socket error:', error);\n          setConnectionError('Communication error with server.');\n        });\n      }\n    } catch (err) {\n      errorLog('Failed to initialize socket:', err);\n      setConnectionError('Failed to initialize connection.');\n    }\n    return () => {\n      if (socketRef.current && typeof socketRef.current.disconnect === 'function') {\n        socketRef.current.disconnect();\n      }\n    };\n  }, [name, room, avatar, userInteracted, devLog, errorLog]);\n  useEffect(() => {\n    if (messagesEndRef.current && typeof messagesEndRef.current.scrollIntoView === 'function') {\n      messagesEndRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n    const handleFocus = async () => {\n      setUnreadCount(0);\n      try {\n        await fetch(`${API_URL}/api/messages/read`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            room,\n            email: name\n          })\n        });\n        const res = await fetch(`${API_URL}/api/messages?room=${room}`);\n        if (res.ok) {\n          const data = await res.json();\n          const fetchedMessages = (data === null || data === void 0 ? void 0 : data.messages) || data || [];\n          setMessages([...fetchedMessages, ...pendingMessages.filter(pm => !fetchedMessages.some(m => m._clientId === pm._clientId))]);\n        }\n      } catch (err) {\n        errorLog('Failed to mark messages as read:', err);\n      }\n    };\n    window.addEventListener('focus', handleFocus);\n    return () => window.removeEventListener('focus', handleFocus);\n  }, [messages, room, name, pendingMessages, errorLog]);\n  useEffect(() => {\n    if (unreadCount > 0) {\n      document.title = `(${unreadCount}) New messages`;\n    } else {\n      document.title = `Chat Room - ${room || 'Loading...'}`;\n    }\n  }, [unreadCount, room]);\n  const loadOlderMessages = async () => {\n    var _messages$;\n    if (messages.length === 0) return;\n    setLoadingOlder(true);\n    const oldest = (_messages$ = messages[0]) === null || _messages$ === void 0 ? void 0 : _messages$.timestamp;\n    try {\n      const res = await fetch(`${API_URL}/api/messages?room=${room}&before=${encodeURIComponent(oldest)}`);\n      if (res.ok) {\n        const data = await res.json();\n        const fetchedMessages = (data === null || data === void 0 ? void 0 : data.messages) || data || [];\n        if (fetchedMessages.length === 0) setHasMore(false);\n        setMessages(prev => [...fetchedMessages, ...prev]);\n        setTimeout(() => {\n          if (firstMessageRef.current && typeof firstMessageRef.current.scrollIntoView === 'function') {\n            firstMessageRef.current.scrollIntoView({\n              behavior: 'smooth',\n              block: 'start'\n            });\n          }\n        }, 100);\n      }\n    } catch (err) {\n      errorLog('Failed to load older messages:', err);\n    }\n    setLoadingOlder(false);\n  };\n  const startRecording = async () => {\n    if (!navigator.mediaDevices) {\n      alert('Audio recording not supported in this browser.');\n      return;\n    }\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      const recorder = new window.MediaRecorder(stream);\n      setMediaRecorder(recorder);\n      setAudioChunks([]);\n      setRecordingTime(0);\n      recorder.start();\n      setRecording(true);\n      recordingIntervalRef.current = setInterval(() => {\n        setRecordingTime(prev => prev + 1);\n      }, 1000);\n      recorder.ondataavailable = e => {\n        setAudioChunks(prev => [...prev, e.data]);\n      };\n      recorder.onstop = () => {\n        clearInterval(recordingIntervalRef.current);\n        const audioBlob = new Blob(audioChunks, {\n          type: 'audio/webm'\n        });\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          sendMessage('', null, reader.result, true);\n        };\n        reader.readAsDataURL(audioBlob);\n        setRecording(false);\n        setMediaRecorder(null);\n        setAudioChunks([]);\n        setRecordingTime(0);\n      };\n    } catch (err) {\n      errorLog('Failed to start recording:', err);\n      alert('Failed to access microphone.');\n    }\n  };\n  const stopRecording = () => {\n    if (mediaRecorder) {\n      mediaRecorder.stop();\n    }\n    if (recordingIntervalRef.current) {\n      clearInterval(recordingIntervalRef.current);\n    }\n  };\n  const handleDeleteMessage = async msgId => {\n    if (!msgId) return;\n    try {\n      const res = await fetch(`${API_URL}/api/messages/${msgId}`, {\n        method: 'DELETE'\n      });\n      if (res.ok) {\n        setMessages(prev => prev.filter(m => m._id !== msgId));\n        setHighlightedMsgId(null);\n      } else {\n        throw new Error('Delete failed');\n      }\n    } catch (err) {\n      errorLog('Failed to delete message:', err);\n      alert('Failed to delete message');\n    }\n  };\n  const handleEditMessage = async (msgId, newText) => {\n    if (!msgId || !(newText !== null && newText !== void 0 && newText.trim())) return;\n    try {\n      const res = await fetch(`${API_URL}/api/messages/${msgId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message: newText.trim()\n        })\n      });\n      if (res.ok) {\n        setMessages(prev => prev.map(m => m._id === msgId ? {\n          ...m,\n          message: newText.trim()\n        } : m));\n        setEditingMsgId(null);\n      } else {\n        throw new Error('Edit failed');\n      }\n    } catch (err) {\n      errorLog('Failed to edit message:', err);\n      alert('Failed to edit message');\n    }\n  };\n  const sendReaction = (msgId, reaction) => {\n    if (!msgId || !reaction) return;\n    if (socketRef.current && typeof socketRef.current.emit === 'function') {\n      socketRef.current.emit('message_reaction', {\n        msgId,\n        reaction,\n        user: name,\n        room\n      });\n    }\n    setHighlightedMsgId(null);\n  };\n  const sendMessage = useCallback((msg = message, img = null, voice = null, fromVoice = false, file = null) => {\n    if (!socketRef.current || typeof socketRef.current.emit !== 'function') return;\n    const messageText = (msg === null || msg === void 0 ? void 0 : msg.trim()) || '';\n    if (!messageText && !img && !voice && !file) return;\n    const _clientId = Date.now() + Math.random().toString(36).substr(2, 9);\n    if (recipient) {\n      const msgData = {\n        sender: name,\n        recipient,\n        message: messageText,\n        image: null,\n        voice: voice || null,\n        file: null,\n        _clientId\n      };\n      if (img) {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          socketRef.current.emit('private_message', {\n            ...msgData,\n            image: reader.result\n          });\n          setPendingMessages(prev => [...prev, {\n            ...msgData,\n            image: reader.result\n          }]);\n          setMessage('');\n        };\n        reader.readAsDataURL(img);\n        return;\n      }\n      if (file) {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          socketRef.current.emit('private_message', {\n            ...msgData,\n            file: {\n              name: file.name,\n              url: reader.result\n            }\n          });\n          setPendingMessages(prev => [...prev, {\n            ...msgData,\n            file: {\n              name: file.name,\n              url: reader.result\n            }\n          }]);\n          setMessage('');\n        };\n        reader.readAsDataURL(file);\n        return;\n      }\n      socketRef.current.emit('private_message', msgData);\n      setPendingMessages(prev => [...prev, msgData]);\n      setMessage('');\n    } else {\n      if (img) {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          const msgData = {\n            sender: name,\n            room,\n            message: messageText,\n            image: reader.result,\n            voice: null,\n            file: null,\n            timestamp: new Date().toISOString(),\n            _clientId\n          };\n          socketRef.current.emit('send_message', msgData);\n          setPendingMessages(prev => [...prev, msgData]);\n          setMessage('');\n        };\n        reader.readAsDataURL(img);\n        return;\n      }\n      if (file) {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          const msgData = {\n            sender: name,\n            room,\n            message: messageText,\n            image: null,\n            voice: null,\n            file: {\n              name: file.name,\n              url: reader.result\n            },\n            timestamp: new Date().toISOString(),\n            _clientId\n          };\n          socketRef.current.emit('send_message', msgData);\n          setPendingMessages(prev => [...prev, msgData]);\n          setMessage('');\n        };\n        reader.readAsDataURL(file);\n        return;\n      }\n      if (voice) {\n        const msgData = {\n          sender: name,\n          room,\n          message: messageText,\n          image: null,\n          voice: voice,\n          file: null,\n          timestamp: new Date().toISOString(),\n          _clientId\n        };\n        socketRef.current.emit('send_message', msgData);\n        setPendingMessages(prev => [...prev, msgData]);\n        if (fromVoice) setMessage('');\n        return;\n      }\n      if (messageText) {\n        const msgData = {\n          sender: name,\n          room,\n          message: messageText,\n          image: null,\n          voice: null,\n          file: null,\n          timestamp: new Date().toISOString(),\n          _clientId\n        };\n        socketRef.current.emit('send_message', msgData);\n        setPendingMessages(prev => [...prev, msgData]);\n        setMessage('');\n      }\n    }\n    if (socketRef.current && typeof socketRef.current.emit === 'function') {\n      socketRef.current.emit('typing', {\n        username: name,\n        room,\n        isTyping: false\n      });\n    }\n    setIsSenderTyping(false);\n  }, [message, recipient, name, room]);\n  const handleSearch = async e => {\n    e.preventDefault();\n    if (!(searchTerm !== null && searchTerm !== void 0 && searchTerm.trim())) return;\n    try {\n      const res = await fetch(`${API_URL}/api/search?room=${room}&q=${encodeURIComponent(searchTerm.trim())}`);\n      if (res.ok) {\n        const data = await res.json();\n        setSearchResults((data === null || data === void 0 ? void 0 : data.results) || data || []);\n      } else {\n        setSearchResults([]);\n      }\n    } catch (err) {\n      errorLog('Search failed:', err);\n      setSearchResults([]);\n    }\n  };\n  const handleBack = () => {\n    if (onLeave) onLeave();\n    navigate('/join');\n  };\n  if (!name || !room) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '20px',\n          textAlign: 'center'\n        },\n        children: \"Loading chat...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 654,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 653,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [connectionError && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#ff6b6b',\n        color: '#fff',\n        padding: '8px',\n        textAlign: 'center',\n        fontWeight: 'bold',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        gap: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u26A0\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 676,\n        columnNumber: 11\n      }, this), connectionError, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.reload(),\n        style: {\n          marginLeft: 10,\n          padding: '4px 8px',\n          background: '#fff',\n          color: '#ff6b6b',\n          border: 'none',\n          borderRadius: 4\n        },\n        children: \"Refresh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 678,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 665,\n      columnNumber: 9\n    }, this), !isConnected && !connectionError && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#ffeaa7',\n        color: '#d35400',\n        padding: '8px',\n        textAlign: 'center',\n        fontWeight: 'bold'\n      },\n      children: \"Disconnected. Trying to reconnect...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 694,\n      columnNumber: 9\n    }, this), isReconnecting && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#dfe6e9',\n        color: '#636e72',\n        padding: '8px',\n        textAlign: 'center',\n        fontWeight: 'bold'\n      },\n      children: \"Reconnecting...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 705,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"emoji-bg emoji1\",\n        children: \"\\uD83D\\uDCAC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 717,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"emoji-bg emoji2\",\n        children: \"\\u2728\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 718,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"emoji-bg emoji3\",\n        children: \"\\uD83D\\uDE80\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 719,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"emoji-bg emoji4\",\n        children: \"\\uD83D\\uDE03\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 720,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"emoji-bg emoji5\",\n        children: \"\\uD83C\\uDF89\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 721,\n        columnNumber: 9\n      }, this), showEmojiPicker && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"emoji-picker-popup\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"emoji-close-btn\",\n          \"aria-label\": \"Close emoji picker\",\n          onClick: () => setShowEmojiPicker(false),\n          children: \"\\u2716\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 725,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(EmojiPicker, {\n          onEmojiClick: emojiData => setMessage(message + ((emojiData === null || emojiData === void 0 ? void 0 : emojiData.emoji) || '')),\n          theme: \"light\",\n          width: 320\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 732,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 724,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"send-button\",\n        onClick: handleBack,\n        children: \"\\u2B05 Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 740,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Room: \", room]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 741,\n        columnNumber: 9\n      }, this), process.env.NODE_ENV === 'development' && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '0.8em',\n          color: '#636e72',\n          padding: '4px 8px',\n          background: '#f1f2f6',\n          borderRadius: 4,\n          margin: '8px 0'\n        },\n        children: [\"\\uD83D\\uDD27 API: \", API_URL, \" | Socket: \", SOCKET_URL, \" | Connected: \", isConnected ? 'âœ…' : 'âŒ']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 745,\n        columnNumber: 11\n      }, this), process.env.NODE_ENV === 'production' && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '0.9em',\n          color: isConnected ? '#00b894' : '#e17055',\n          padding: '6px 12px',\n          background: isConnected ? '#d1f2eb' : '#fff5f5',\n          borderRadius: 8,\n          margin: '8px 0',\n          border: `1px solid ${isConnected ? '#00b894' : '#fab1a0'}`,\n          textAlign: 'center'\n        },\n        children: [\"\\uD83C\\uDF10 \", isConnected ? 'Connected to Cloud Server' : 'Connection Issue - Check Internet']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 759,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSearch,\n        style: {\n          margin: '10px 0',\n          display: 'flex',\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: searchTerm,\n          onChange: e => setSearchTerm(e.target.value || ''),\n          placeholder: \"Search messages...\",\n          style: {\n            padding: '6px 12px',\n            borderRadius: 8,\n            border: '1px solid #b2bec3',\n            flex: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 774,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"send-button\",\n          style: {\n            padding: '6px 16px',\n            borderRadius: 8\n          },\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 781,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 773,\n        columnNumber: 9\n      }, this), searchResults.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 12,\n          background: '#dfe6e9',\n          borderRadius: 8,\n          padding: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 'bold',\n            marginBottom: 6\n          },\n          children: \"Search Results:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 788,\n          columnNumber: 13\n        }, this), searchResults.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 8,\n            paddingBottom: 6,\n            borderBottom: '1px solid #b2bec3'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontWeight: 'bold',\n              color: '#0984e3'\n            },\n            children: (msg === null || msg === void 0 ? void 0 : msg.sender) || 'Unknown'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 791,\n            columnNumber: 17\n          }, this), \": \", (msg === null || msg === void 0 ? void 0 : msg.message) || '', /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginLeft: 8,\n              color: '#636e72',\n              fontSize: '0.9em'\n            },\n            children: (msg === null || msg === void 0 ? void 0 : msg.timestamp) && new Date(msg.timestamp).toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 792,\n            columnNumber: 17\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 790,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"send-button\",\n          style: {\n            marginTop: 10\n          },\n          onClick: () => setSearchResults([]),\n          children: \"Back to Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 797,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 787,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: '10px 0 10px 0',\n          padding: '6px 16px',\n          background: '#f1f2f6',\n          borderRadius: '12px',\n          color: '#636e72',\n          fontSize: '0.98rem',\n          fontWeight: 'bold',\n          display: 'flex',\n          alignItems: 'center',\n          gap: 10,\n          flexWrap: 'wrap'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"online\",\n          children: \"\\uD83D\\uDFE2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 820,\n          columnNumber: 11\n        }, this), \"Online: \", onlineUsers.map((u, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: u === name ? '#6c5ce7' : '#636e72',\n            fontWeight: u === name ? 'bold' : 'normal',\n            marginRight: 8\n          },\n          children: [u || 'Unknown', u === name ? ' (You)' : '']\n        }, u || index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 822,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 807,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 10,\n          display: 'flex',\n          alignItems: 'center',\n          flexWrap: 'wrap',\n          justifyContent: 'flex-start'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"recipient\",\n          style: {\n            marginLeft: 22,\n            marginRight: 22,\n            whiteSpace: 'nowrap',\n            fontWeight: 400,\n            fontSize: '1rem'\n          },\n          children: \"Send private message to:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 839,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"recipient\",\n          value: recipient,\n          onChange: e => setRecipient(e.target.value || ''),\n          style: {\n            padding: '4px 8px',\n            borderRadius: 6\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"-- None --\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 854,\n            columnNumber: 13\n          }, this), onlineUsers.filter(u => u && u !== name).map((u, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: u,\n            children: u\n          }, u || index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 856,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 848,\n          columnNumber: 11\n        }, this), recipient && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"private-mode-text\",\n          children: \"(Private mode)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 860,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 832,\n        columnNumber: 9\n      }, this), isSenderTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"typing-indicator\",\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 6\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"typing\",\n          children: \"\\uD83D\\uDCAC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 868,\n          columnNumber: 13\n        }, this), \"You are typing\", /*#__PURE__*/_jsxDEV(TypingDots, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 869,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 867,\n        columnNumber: 11\n      }, this), typingUser && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"typing-indicator\",\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 6\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"typing\",\n          children: \"\\uD83D\\uDCAC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 875,\n          columnNumber: 13\n        }, this), typingUser, \" is typing\", /*#__PURE__*/_jsxDEV(TypingDots, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 876,\n          columnNumber: 35\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 874,\n        columnNumber: 11\n      }, this), unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"unread-badge\",\n        children: [unreadCount, \" unread message\", unreadCount > 1 ? 's' : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 881,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          margin: '10px 0'\n        },\n        children: hasMore ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"load-older-btn\",\n          onClick: loadOlderMessages,\n          disabled: loadingOlder,\n          children: loadingOlder ? 'Loading...' : 'Load Older Messages'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 888,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: '#636e72',\n            fontSize: '0.95rem'\n          },\n          children: \"No more messages\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 896,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 886,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages\",\n        style: {\n          minHeight: 0,\n          flex: 1,\n          width: '100%',\n          overflowY: 'auto',\n          padding: '20px 8px 0 8px'\n        },\n        children: [messages.map((msg, i) => {\n          var _msg$file;\n          if (!msg) return null;\n          const isUser = msg.sender === name;\n          const isFirst = i === 0;\n          const isPending = pendingMessages.some(pm => pm._clientId === msg._clientId);\n          const isHighlighted = highlightedMsgId === msg._id;\n          const isEditing = editingMsgId === msg._id;\n          const handleMouseDown = () => {\n            if (longPressTimerRef.current) {\n              clearTimeout(longPressTimerRef.current);\n            }\n            longPressTimerRef.current = setTimeout(() => setHighlightedMsgId(msg._id), 600);\n          };\n          const handleMouseUp = () => {\n            if (longPressTimerRef.current) {\n              clearTimeout(longPressTimerRef.current);\n            }\n          };\n          const handleMouseLeave = () => {\n            if (longPressTimerRef.current) {\n              clearTimeout(longPressTimerRef.current);\n            }\n          };\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `message ${isUser ? 'sent' : 'received'}${isHighlighted ? ' highlighted' : ''}`,\n            style: {\n              display: 'flex',\n              alignItems: 'flex-start',\n              marginBottom: 12,\n              opacity: isPending ? 0.5 : 1,\n              maxWidth: '100vw',\n              background: isHighlighted ? '#ffeaa7' : undefined,\n              border: isHighlighted ? '2px solid #fdcb6e' : undefined,\n              transition: 'background 0.2s, border 0.2s'\n            },\n            ref: isFirst ? firstMessageRef : null,\n            onMouseDown: handleMouseDown,\n            onMouseUp: handleMouseUp,\n            onMouseLeave: handleMouseLeave,\n            onTouchStart: handleMouseDown,\n            onTouchEnd: handleMouseUp,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: msg.avatar || 'https://api.dicebear.com/7.x/bottts/svg?seed=User',\n              alt: \"avatar\",\n              className: \"avatar-img\",\n              style: {\n                width: 36,\n                height: 36,\n                borderRadius: '50%',\n                objectFit: 'cover',\n                marginRight: 10,\n                border: '2px solid #764ba2',\n                background: '#fff'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 954,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bubble\",\n              style: {\n                maxWidth: '90vw',\n                wordBreak: 'break-word',\n                overflowWrap: 'break-word'\n              },\n              children: [msg.private && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"private-mode-text\",\n                children: \"Private message\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 970,\n                columnNumber: 21\n              }, this), isEditing ? /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: e => {\n                  e.preventDefault();\n                  handleEditMessage(msg._id, editingText);\n                },\n                style: {\n                  marginBottom: 8\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: editingText,\n                  onChange: e => setEditingText(e.target.value || ''),\n                  style: {\n                    width: '80%',\n                    padding: 4,\n                    borderRadius: 6,\n                    border: '1px solid #b2bec3'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 982,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  className: \"send-button\",\n                  style: {\n                    marginLeft: 8\n                  },\n                  children: \"Save\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 988,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"send-button\",\n                  style: {\n                    marginLeft: 4,\n                    background: '#636e72'\n                  },\n                  onClick: () => setEditingMsgId(null),\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 989,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 975,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [msg.message && /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: msg.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 993,\n                  columnNumber: 39\n                }, this), !msg.message && msg.image && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontStyle: 'italic',\n                    color: '#888',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 4\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    role: \"img\",\n                    \"aria-label\": \"image\",\n                    children: \"\\uD83D\\uDDBC\\uFE0F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 996,\n                    columnNumber: 27\n                  }, this), \" Image\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 995,\n                  columnNumber: 25\n                }, this), !msg.message && msg.voice && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontStyle: 'italic',\n                    color: '#888',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 4\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    role: \"img\",\n                    \"aria-label\": \"voice\",\n                    children: \"\\uD83C\\uDFA4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1001,\n                    columnNumber: 27\n                  }, this), \" Voice note\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1000,\n                  columnNumber: 25\n                }, this), ((_msg$file = msg.file) === null || _msg$file === void 0 ? void 0 : _msg$file.url) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: 8\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    role: \"img\",\n                    \"aria-label\": \"file\",\n                    children: \"\\uD83D\\uDCCE\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1006,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: msg.file.url,\n                    download: msg.file.name,\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    style: {\n                      color: '#0984e3',\n                      textDecoration: 'underline',\n                      marginLeft: 4\n                    },\n                    children: msg.file.name || 'Download file'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1007,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1005,\n                  columnNumber: 25\n                }, this), msg.image && /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: msg.image,\n                  download: `chat-image-${i}.png`,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: msg.image,\n                    alt: \"sent\",\n                    className: \"chat-image\",\n                    style: {\n                      maxWidth: '90vw',\n                      maxHeight: 120,\n                      borderRadius: 10,\n                      marginTop: 8,\n                      display: 'block',\n                      cursor: 'pointer'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1014,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1013,\n                  columnNumber: 25\n                }, this), msg.voice && msg.voice.startsWith('data:audio') && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 6,\n                    marginTop: 8\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    role: \"img\",\n                    \"aria-label\": \"play\",\n                    children: \"\\uD83D\\uDD0A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1024,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n                    controls: true,\n                    style: {\n                      width: '90vw',\n                      maxWidth: 240\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"source\", {\n                      src: msg.voice,\n                      type: \"audio/webm\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1026,\n                      columnNumber: 29\n                    }, this), \"Your browser does not support audio.\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1025,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1023,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"timestamp\",\n                  children: msg.timestamp && new Date(msg.timestamp).toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1031,\n                  columnNumber: 23\n                }, this), isPending && /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: '#fdcb6e',\n                    marginLeft: 8,\n                    fontSize: '0.9em'\n                  },\n                  children: \"Sending...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1033,\n                  columnNumber: 25\n                }, this), isUser && msg.readBy && /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: '#00b894',\n                    fontSize: '0.9em',\n                    marginLeft: 8\n                  },\n                  children: msg.readBy.length === onlineUsers.length - 1 ? 'âœ”âœ” Read' : 'âœ” Sent'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1038,\n                  columnNumber: 25\n                }, this), isHighlighted && msg._id && !isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: 8,\n                    display: 'flex',\n                    gap: 8,\n                    flexWrap: 'wrap'\n                  },\n                  children: [isUser && /*#__PURE__*/_jsxDEV(\"button\", {\n                    style: {\n                      background: '#00b894',\n                      color: '#fff',\n                      border: 'none',\n                      borderRadius: 6,\n                      padding: '4px 12px',\n                      cursor: 'pointer'\n                    },\n                    onClick: () => {\n                      setEditingMsgId(msg._id);\n                      setEditingText(msg.message || '');\n                    },\n                    children: \"Edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1045,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    style: {\n                      background: '#d63031',\n                      color: '#fff',\n                      border: 'none',\n                      borderRadius: 6,\n                      padding: '4px 12px',\n                      cursor: 'pointer'\n                    },\n                    onClick: () => handleDeleteMessage(msg._id),\n                    children: \"Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1062,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      gap: 4,\n                      flexWrap: 'wrap'\n                    },\n                    children: REACTIONS.map(r => /*#__PURE__*/_jsxDEV(\"button\", {\n                      style: {\n                        background: '#fff',\n                        border: '1px solid #b2bec3',\n                        borderRadius: 6,\n                        padding: '2px 8px',\n                        cursor: 'pointer',\n                        fontSize: '1.2em'\n                      },\n                      onClick: () => sendReaction(msg._id, r),\n                      title: `React with ${r}`,\n                      children: r\n                    }, r, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1077,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1075,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1043,\n                  columnNumber: 25\n                }, this), msg.reactions && msg.reactions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: 6,\n                    display: 'flex',\n                    gap: 8,\n                    flexWrap: 'wrap'\n                  },\n                  children: REACTIONS.map(r => {\n                    const count = msg.reactions.filter(rx => (rx === null || rx === void 0 ? void 0 : rx.reaction) === r).length;\n                    return count > 0 ? /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        background: '#dfe6e9',\n                        borderRadius: 8,\n                        padding: '2px 8px',\n                        fontSize: '1.1em'\n                      },\n                      children: [r, \" \", count]\n                    }, r, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1101,\n                      columnNumber: 31\n                    }, this) : null;\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1097,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 968,\n              columnNumber: 17\n            }, this)]\n          }, msg._id || i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 934,\n            columnNumber: 15\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1114,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 900,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 10,\n          flexWrap: 'nowrap',\n          overflowX: 'auto',\n          paddingBottom: 'env(safe-area-inset-bottom, 24px)',\n          marginBottom: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"message-input\",\n          type: \"text\",\n          name: \"chat-message\",\n          placeholder: \"Type message...\",\n          value: message,\n          onChange: e => {\n            setMessage(e.target.value || '');\n            if (socketRef.current && typeof socketRef.current.emit === 'function') {\n              socketRef.current.emit('typing', {\n                username: name,\n                room,\n                isTyping: (e.target.value || '').length > 0\n              });\n            }\n            setIsSenderTyping((e.target.value || '').length > 0);\n          },\n          onKeyDown: e => e.key === 'Enter' && sendMessage(),\n          style: {\n            flex: '1 1 auto',\n            minWidth: 80,\n            paddingBottom: 12,\n            fontSize: '1.05em'\n          },\n          autoComplete: \"off\",\n          autoCorrect: \"on\",\n          spellCheck: true,\n          disabled: !isConnected\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"icon-button\",\n          title: \"Add emoji\",\n          onClick: () => setShowEmojiPicker(!showEmojiPicker),\n          style: {\n            flex: '0 0 auto'\n          },\n          disabled: !isConnected,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"emoji\",\n            children: \"\\uD83D\\uDE03\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1161,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          name: \"chat-image\",\n          ref: fileInputRef,\n          onChange: e => {\n            if (e.target.files && e.target.files[0]) {\n              sendMessage('', e.target.files[0], null);\n              e.target.value = '';\n            }\n          },\n          hidden: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"icon-button\",\n          onClick: () => {\n            var _fileInputRef$current;\n            return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n          },\n          title: \"Send image\",\n          style: {\n            flex: '0 0 auto'\n          },\n          disabled: !isConnected,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"camera\",\n            children: \"\\uD83D\\uDCF7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1183,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.txt,.zip,.rar,.csv,application/*\",\n          style: {\n            display: 'none'\n          },\n          id: \"file-upload\",\n          onChange: e => {\n            if (e.target.files && e.target.files[0]) {\n              sendMessage('', null, null, false, e.target.files[0]);\n              e.target.value = '';\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"icon-button\",\n          title: \"Send file\",\n          style: {\n            flex: '0 0 auto'\n          },\n          onClick: () => {\n            var _document$getElementB;\n            return (_document$getElementB = document.getElementById('file-upload')) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.click();\n          },\n          disabled: !isConnected,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"file\",\n            children: \"\\uD83D\\uDCCE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1204,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1197,\n          columnNumber: 11\n        }, this), !recording ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"icon-button\",\n          onClick: startRecording,\n          title: \"Record voice note\",\n          style: {\n            flex: '0 0 auto'\n          },\n          disabled: !isConnected,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"mic\",\n            children: \"\\uD83C\\uDF99\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1214,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1207,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"icon-button\",\n          onClick: stopRecording,\n          style: {\n            color: 'red',\n            flex: '0 0 auto'\n          },\n          title: \"Stop recording\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"stop\",\n            children: \"\\u23F9\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1223,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1217,\n          columnNumber: 13\n        }, this), recording && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            marginLeft: 10,\n            color: '#e17055',\n            fontWeight: 'bold',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 4,\n            flex: '0 0 auto'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"timer\",\n            children: \"\\u23F1\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1228,\n            columnNumber: 15\n          }, this), \" \", recordingTime, \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1227,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"send-button\",\n          onClick: () => sendMessage(),\n          style: {\n            flex: '0 0 auto'\n          },\n          disabled: !isConnected,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": \"send\",\n            children: \"\\uD83D\\uDCE4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1237,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1231,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1117,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 716,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 662,\n    columnNumber: 5\n  }, this);\n};\n_s2(Chat, \"uyo9UOhwX9rc0nn0ltH2JgI7H5I=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c2 = Chat;\nexport default Chat;\nvar _c, _c2;\n$RefreshReg$(_c, \"TypingDots\");\n$RefreshReg$(_c2, \"Chat\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useCallback","useLocation","useNavigate","io","queryString","EmojiPicker","jsxDEV","_jsxDEV","Fragment","_Fragment","NOTIFICATION_SOUND_URL","NAMESPACE","getApiUrl","process","env","REACT_APP_API_URL","NODE_ENV","window","location","origin","replace","API_URL","SOCKET_URL","REACT_APP_SOCKET_URL","REACTIONS","TypingDots","_s","dots","setDots","interval","setInterval","prev","length","clearInterval","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","Chat","onLeave","user","_s2","search","navigate","params","parse","name","email","localStorage","getItem","room","avatar","message","setMessage","messages","setMessages","recording","setRecording","mediaRecorder","setMediaRecorder","audioChunks","setAudioChunks","recordingTime","setRecordingTime","typingUser","setTypingUser","isSenderTyping","setIsSenderTyping","onlineUsers","setOnlineUsers","recipient","setRecipient","showEmojiPicker","setShowEmojiPicker","unreadCount","setUnreadCount","userInteracted","setUserInteracted","loadingOlder","setLoadingOlder","hasMore","setHasMore","isConnected","setIsConnected","isReconnecting","setIsReconnecting","pendingMessages","setPendingMessages","searchTerm","setSearchTerm","searchResults","setSearchResults","highlightedMsgId","setHighlightedMsgId","editingMsgId","setEditingMsgId","editingText","setEditingText","connectionError","setConnectionError","recordingIntervalRef","fileInputRef","messagesEndRef","firstMessageRef","socketRef","longPressTimerRef","devLog","args","console","log","errorLog","error","fetchMessages","res","fetch","ok","data","json","statusText","status","err","setInteracted","addEventListener","once","removeEventListener","Notification","permission","requestPermission","current","transports","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","timeout","forceNew","upgrade","rememberUpgrade","socket","emit","on","reason","attemptNumber","filter","pm","_clientId","m","sender","audio","Audio","play","catch","_data$file","body","file","document","hidden","c","title","username","isTyping","users","Array","isArray","map","u","Boolean","type","ack","msgId","reaction","reactionUser","_id","reactions","disconnect","scrollIntoView","behavior","handleFocus","method","headers","JSON","stringify","fetchedMessages","some","loadOlderMessages","_messages$","oldest","timestamp","encodeURIComponent","setTimeout","block","startRecording","navigator","mediaDevices","alert","stream","getUserMedia","recorder","MediaRecorder","start","ondataavailable","e","onstop","audioBlob","Blob","reader","FileReader","onloadend","sendMessage","result","readAsDataURL","stopRecording","stop","handleDeleteMessage","Error","handleEditMessage","newText","trim","sendReaction","msg","img","voice","fromVoice","messageText","Date","now","Math","random","toString","substr","msgData","image","url","toISOString","handleSearch","preventDefault","results","handleBack","className","style","padding","textAlign","background","color","fontWeight","display","alignItems","justifyContent","gap","onClick","reload","marginLeft","border","borderRadius","onEmojiClick","emojiData","emoji","theme","width","fontSize","margin","onSubmit","value","onChange","target","placeholder","flex","marginBottom","i","paddingBottom","borderBottom","toLocaleString","marginTop","flexWrap","role","index","marginRight","htmlFor","whiteSpace","id","disabled","minHeight","overflowY","_msg$file","isUser","isFirst","isPending","isHighlighted","isEditing","handleMouseDown","clearTimeout","handleMouseUp","handleMouseLeave","opacity","maxWidth","undefined","transition","ref","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","src","alt","height","objectFit","wordBreak","overflowWrap","private","fontStyle","href","download","rel","textDecoration","maxHeight","cursor","startsWith","controls","readBy","r","count","rx","overflowX","onKeyDown","key","minWidth","autoComplete","autoCorrect","spellCheck","accept","files","_fileInputRef$current","click","_document$getElementB","getElementById","_c2","$RefreshReg$"],"sources":["C:/Users/User/OneDrive/Desktop/socket/client/src/components/Chat/Chat.js"],"sourcesContent":["import React, { useEffect, useState, useRef, useCallback } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { io } from 'socket.io-client';\r\nimport queryString from 'query-string';\r\nimport EmojiPicker from 'emoji-picker-react';\r\nimport './Chat.css';\r\n\r\nconst NOTIFICATION_SOUND_URL = \"https://assets.mixkit.co/sfx/preview/mixkit-bell-notification-933.mp3\";\r\nconst NAMESPACE = '/chat';\r\n\r\n// ðŸŒ PRODUCTION-READY: Smart URL detection for cloud deployment\r\nconst getApiUrl = () => {\r\n  // Priority 1: Environment variables (set during deployment)\r\n  if (process.env.REACT_APP_API_URL) {\r\n    return process.env.REACT_APP_API_URL;\r\n  }\r\n  \r\n  // Priority 2: Production auto-detection\r\n  if (process.env.NODE_ENV === 'production') {\r\n    // ðŸ”„ This will be automatically replaced with your actual backend URL\r\n    // Example: 'https://your-backend-name.onrender.com'\r\n    return window.location.origin.replace('netlify.app', 'onrender.com').replace(':3000', '');\r\n  }\r\n  \r\n  // Priority 3: Development fallback\r\n  return 'http://localhost:5000';\r\n};\r\n\r\nconst API_URL = getApiUrl();\r\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || API_URL;\r\n\r\nconst REACTIONS = ['ðŸ‘', 'â¤ï¸', 'ðŸ˜‚', 'ðŸ˜®', 'ðŸ˜¢', 'ðŸ‘'];\r\n\r\nfunction TypingDots() {\r\n  const [dots, setDots] = useState('');\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setDots(prev => prev.length < 3 ? prev + '.' : '');\r\n    }, 400);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n  return <span>{dots}</span>;\r\n}\r\n\r\nconst Chat = ({ onLeave, user }) => {\r\n  const { search } = useLocation();\r\n  const navigate = useNavigate();\r\n  \r\n  // Fix for undefined params issue - added safety checks\r\n  const params = queryString.parse(search) || {};\r\n  const name = params.name || user?.email || localStorage.getItem('chat_name') || '';\r\n  const room = params.room || localStorage.getItem('chat_room') || '';\r\n  const avatar = params.avatar || localStorage.getItem('chat_avatar') || null;\r\n\r\n  useEffect(() => {\r\n    if (!name || !room) {\r\n      navigate('/join');\r\n    }\r\n  }, [name, room, navigate]);\r\n\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n  const [recording, setRecording] = useState(false);\r\n  const [mediaRecorder, setMediaRecorder] = useState(null);\r\n  const [audioChunks, setAudioChunks] = useState([]);\r\n  const [recordingTime, setRecordingTime] = useState(0);\r\n  const [typingUser, setTypingUser] = useState('');\r\n  const [isSenderTyping, setIsSenderTyping] = useState(false);\r\n  const [onlineUsers, setOnlineUsers] = useState([]);\r\n  const [recipient, setRecipient] = useState('');\r\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [userInteracted, setUserInteracted] = useState(false);\r\n  const [loadingOlder, setLoadingOlder] = useState(false);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [isConnected, setIsConnected] = useState(true);\r\n  const [isReconnecting, setIsReconnecting] = useState(false);\r\n  const [pendingMessages, setPendingMessages] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [highlightedMsgId, setHighlightedMsgId] = useState(null);\r\n  const [editingMsgId, setEditingMsgId] = useState(null);\r\n  const [editingText, setEditingText] = useState('');\r\n  const [connectionError, setConnectionError] = useState(null);\r\n  \r\n  const recordingIntervalRef = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n  const messagesEndRef = useRef(null);\r\n  const firstMessageRef = useRef(null);\r\n  const socketRef = useRef();\r\n  const longPressTimerRef = useRef(null);\r\n\r\n  // ðŸ”§ Development logging helper\r\n  const devLog = useCallback((message, ...args) => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      // eslint-disable-next-line no-console\r\n      console.log(message, ...args);\r\n    }\r\n  }, []);\r\n\r\n  // ðŸ”§ Error logging helper\r\n  const errorLog = useCallback((message, ...args) => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      // eslint-disable-next-line no-console\r\n      console.error(message, ...args);\r\n    }\r\n  }, []);\r\n\r\n  // Enhanced message fetching with error handling\r\n  useEffect(() => {\r\n    const fetchMessages = async () => {\r\n      try {\r\n        const res = await fetch(`${API_URL}/api/messages?room=${room}`);\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          setMessages(data?.messages || data || []);\r\n        } else {\r\n          errorLog('Failed to fetch messages:', res.statusText);\r\n          setMessages([]);\r\n          if (res.status >= 500) {\r\n            setConnectionError('Server error. Please try again later.');\r\n          }\r\n        }\r\n      } catch (err) {\r\n        errorLog('Failed to fetch messages:', err);\r\n        setMessages([]);\r\n        setConnectionError('Network error. Check your connection.');\r\n      }\r\n    };\r\n    if (room) {\r\n      fetchMessages();\r\n    }\r\n  }, [room, errorLog]);\r\n\r\n  useEffect(() => {\r\n    const setInteracted = () => setUserInteracted(true);\r\n    window.addEventListener('click', setInteracted, { once: true });\r\n    window.addEventListener('keydown', setInteracted, { once: true });\r\n    return () => {\r\n      window.removeEventListener('click', setInteracted);\r\n      window.removeEventListener('keydown', setInteracted);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (typeof Notification !== 'undefined' && Notification.permission !== 'granted') {\r\n      Notification.requestPermission();\r\n    }\r\n  }, []);\r\n\r\n  // Enhanced Socket.IO connection with better cloud performance\r\n  useEffect(() => {\r\n    if (!name || !room) return;\r\n\r\n    try {\r\n      devLog(`ðŸ”Œ Connecting to: ${SOCKET_URL}${NAMESPACE}`);\r\n      \r\n      socketRef.current = io(SOCKET_URL + NAMESPACE, {\r\n        transports: ['websocket', 'polling'], // Polling fallback for cloud\r\n        reconnection: true,\r\n        reconnectionAttempts: 15,\r\n        reconnectionDelay: 2000,\r\n        reconnectionDelayMax: 10000,\r\n        timeout: 30000, // Increased for cloud latency\r\n        forceNew: true,\r\n        upgrade: true,\r\n        rememberUpgrade: true,\r\n      });\r\n      \r\n      const socket = socketRef.current;\r\n      \r\n      if (socket && typeof socket.emit === 'function') {\r\n        socket.emit('user_join', { name, room, avatar });\r\n\r\n        socket.on('connect', () => {\r\n          devLog('âœ… Socket connected successfully');\r\n          setIsConnected(true);\r\n          setIsReconnecting(false);\r\n          setConnectionError(null);\r\n        });\r\n\r\n        socket.on('disconnect', (reason) => {\r\n          devLog('âŒ Socket disconnected:', reason);\r\n          setIsConnected(false);\r\n          if (reason === 'io server disconnect') {\r\n            setConnectionError('Server disconnected. Please refresh the page.');\r\n          } else {\r\n            setIsReconnecting(true);\r\n          }\r\n        });\r\n\r\n        socket.on('connect_error', (error) => {\r\n          errorLog('ðŸ”¥ Connection error:', error);\r\n          setConnectionError('Failed to connect to server. Please check your connection.');\r\n          setIsConnected(false);\r\n        });\r\n\r\n        socket.on('reconnect_attempt', (attemptNumber) => {\r\n          devLog(`ðŸ”„ Reconnection attempt ${attemptNumber}`);\r\n          setIsReconnecting(true);\r\n        });\r\n\r\n        socket.on('reconnect', (attemptNumber) => {\r\n          devLog(`âœ… Reconnected after ${attemptNumber} attempts`);\r\n          setIsConnected(true);\r\n          setIsReconnecting(false);\r\n          setConnectionError(null);\r\n          // Re-join room after reconnection\r\n          socket.emit('user_join', { name, room, avatar });\r\n        });\r\n\r\n        socket.on('reconnect_failed', () => {\r\n          errorLog('âŒ Failed to reconnect');\r\n          setConnectionError('Failed to reconnect. Please refresh the page.');\r\n          setIsReconnecting(false);\r\n        });\r\n\r\n        socket.on('receive_message', (data) => {\r\n          if (!data) return;\r\n          \r\n          setPendingMessages(prev => prev.filter(pm => pm._clientId !== data._clientId));\r\n          setMessages((prev) => [\r\n            ...prev.filter(m => m._clientId !== data._clientId),\r\n            data\r\n          ]);\r\n          \r\n          if (userInteracted && data.sender !== name) {\r\n            try {\r\n              const audio = new Audio(NOTIFICATION_SOUND_URL);\r\n              audio.play().catch(() => {});\r\n            } catch (err) {\r\n              errorLog('Audio play failed:', err);\r\n            }\r\n          }\r\n          \r\n          if (typeof Notification !== 'undefined' && Notification.permission === 'granted' && data.sender !== name) {\r\n            new Notification(`New message from ${data.sender}`, { \r\n              body: data.message || (data.file?.name || 'Media message') \r\n            });\r\n          }\r\n          \r\n          if (document.hidden) setUnreadCount(c => c + 1);\r\n        });\r\n\r\n        socket.on('push_notification', ({ title, body }) => {\r\n          if (typeof Notification !== 'undefined' && Notification.permission === 'granted') {\r\n            new Notification(title, { body });\r\n          }\r\n        });\r\n\r\n        socket.on('typing', (data) => {\r\n          if (!data || !data.username) return;\r\n          \r\n          if (data.username !== name && data.isTyping) {\r\n            setTypingUser(data.username);\r\n          } else if (data.username === name && data.isTyping) {\r\n            setIsSenderTyping(true);\r\n          } else if (data.username === name && !data.isTyping) {\r\n            setIsSenderTyping(false);\r\n          } else if (!data.isTyping) {\r\n            setTypingUser('');\r\n          }\r\n        });\r\n\r\n        socket.on('active_users', (users) => {\r\n          if (Array.isArray(users)) {\r\n            setOnlineUsers(users.map(u => typeof u === 'string' ? u : u.name).filter(Boolean));\r\n          } else {\r\n            setOnlineUsers([]);\r\n          }\r\n        });\r\n\r\n        socket.on('user_event', (data) => {\r\n          if (!data || !data.user) return;\r\n          \r\n          if (typeof Notification !== 'undefined' && Notification.permission === 'granted') {\r\n            if (data.type === 'join') {\r\n              new Notification('User joined', { body: `${data.user} joined the room.` });\r\n            }\r\n            if (data.type === 'leave') {\r\n              new Notification('User left', { body: `${data.user} left the room.` });\r\n            }\r\n          }\r\n          if (userInteracted) {\r\n            try {\r\n              const audio = new Audio(NOTIFICATION_SOUND_URL);\r\n              audio.play().catch(() => {});\r\n            } catch (err) {\r\n              errorLog('Audio play failed:', err);\r\n            }\r\n          }\r\n        });\r\n\r\n        socket.on('message_ack', (ack) => {\r\n          if (!ack || !ack._clientId) return;\r\n          setPendingMessages(prev => prev.filter(pm => pm._clientId !== ack._clientId));\r\n        });\r\n\r\n        socket.on('message_reaction', ({ msgId, reaction, user: reactionUser }) => {\r\n          if (!msgId || !reaction || !reactionUser) return;\r\n          \r\n          setMessages(prev =>\r\n            prev.map(m =>\r\n              m._id === msgId\r\n                ? {\r\n                    ...m,\r\n                    reactions: [\r\n                      ...(m.reactions || []),\r\n                      { reaction, user: reactionUser }\r\n                    ]\r\n                  }\r\n                : m\r\n            )\r\n          );\r\n        });\r\n\r\n        socket.on('error', (error) => {\r\n          errorLog('Socket error:', error);\r\n          setConnectionError('Communication error with server.');\r\n        });\r\n      }\r\n    } catch (err) {\r\n      errorLog('Failed to initialize socket:', err);\r\n      setConnectionError('Failed to initialize connection.');\r\n    }\r\n\r\n    return () => {\r\n      if (socketRef.current && typeof socketRef.current.disconnect === 'function') {\r\n        socketRef.current.disconnect();\r\n      }\r\n    };\r\n  }, [name, room, avatar, userInteracted, devLog, errorLog]);\r\n\r\n  useEffect(() => {\r\n    if (messagesEndRef.current && typeof messagesEndRef.current.scrollIntoView === 'function') {\r\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n    \r\n    const handleFocus = async () => {\r\n      setUnreadCount(0);\r\n      try {\r\n        await fetch(`${API_URL}/api/messages/read`, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ room, email: name }),\r\n        });\r\n        const res = await fetch(`${API_URL}/api/messages?room=${room}`);\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          const fetchedMessages = data?.messages || data || [];\r\n          setMessages([\r\n            ...fetchedMessages,\r\n            ...pendingMessages.filter(pm => !fetchedMessages.some(m => m._clientId === pm._clientId))\r\n          ]);\r\n        }\r\n      } catch (err) {\r\n        errorLog('Failed to mark messages as read:', err);\r\n      }\r\n    };\r\n    window.addEventListener('focus', handleFocus);\r\n    return () => window.removeEventListener('focus', handleFocus);\r\n  }, [messages, room, name, pendingMessages, errorLog]);\r\n\r\n  useEffect(() => {\r\n    if (unreadCount > 0) {\r\n      document.title = `(${unreadCount}) New messages`;\r\n    } else {\r\n      document.title = `Chat Room - ${room || 'Loading...'}`;\r\n    }\r\n  }, [unreadCount, room]);\r\n\r\n  const loadOlderMessages = async () => {\r\n    if (messages.length === 0) return;\r\n    setLoadingOlder(true);\r\n    const oldest = messages[0]?.timestamp;\r\n    try {\r\n      const res = await fetch(`${API_URL}/api/messages?room=${room}&before=${encodeURIComponent(oldest)}`);\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        const fetchedMessages = data?.messages || data || [];\r\n        if (fetchedMessages.length === 0) setHasMore(false);\r\n        setMessages(prev => [...fetchedMessages, ...prev]);\r\n        setTimeout(() => {\r\n          if (firstMessageRef.current && typeof firstMessageRef.current.scrollIntoView === 'function') {\r\n            firstMessageRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n          }\r\n        }, 100);\r\n      }\r\n    } catch (err) {\r\n      errorLog('Failed to load older messages:', err);\r\n    }\r\n    setLoadingOlder(false);\r\n  };\r\n\r\n  const startRecording = async () => {\r\n    if (!navigator.mediaDevices) {\r\n      alert('Audio recording not supported in this browser.');\r\n      return;\r\n    }\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      const recorder = new window.MediaRecorder(stream);\r\n      setMediaRecorder(recorder);\r\n      setAudioChunks([]);\r\n      setRecordingTime(0);\r\n      recorder.start();\r\n      setRecording(true);\r\n\r\n      recordingIntervalRef.current = setInterval(() => {\r\n        setRecordingTime(prev => prev + 1);\r\n      }, 1000);\r\n\r\n      recorder.ondataavailable = (e) => {\r\n        setAudioChunks((prev) => [...prev, e.data]);\r\n      };\r\n\r\n      recorder.onstop = () => {\r\n        clearInterval(recordingIntervalRef.current);\r\n        const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => {\r\n          sendMessage('', null, reader.result, true);\r\n        };\r\n        reader.readAsDataURL(audioBlob);\r\n        setRecording(false);\r\n        setMediaRecorder(null);\r\n        setAudioChunks([]);\r\n        setRecordingTime(0);\r\n      };\r\n    } catch (err) {\r\n      errorLog('Failed to start recording:', err);\r\n      alert('Failed to access microphone.');\r\n    }\r\n  };\r\n\r\n  const stopRecording = () => {\r\n    if (mediaRecorder) {\r\n      mediaRecorder.stop();\r\n    }\r\n    if (recordingIntervalRef.current) {\r\n      clearInterval(recordingIntervalRef.current);\r\n    }\r\n  };\r\n\r\n  const handleDeleteMessage = async (msgId) => {\r\n    if (!msgId) return;\r\n    try {\r\n      const res = await fetch(`${API_URL}/api/messages/${msgId}`, { method: 'DELETE' });\r\n      if (res.ok) {\r\n        setMessages(prev => prev.filter(m => m._id !== msgId));\r\n        setHighlightedMsgId(null);\r\n      } else {\r\n        throw new Error('Delete failed');\r\n      }\r\n    } catch (err) {\r\n      errorLog('Failed to delete message:', err);\r\n      alert('Failed to delete message');\r\n    }\r\n  };\r\n\r\n  const handleEditMessage = async (msgId, newText) => {\r\n    if (!msgId || !newText?.trim()) return;\r\n    try {\r\n      const res = await fetch(`${API_URL}/api/messages/${msgId}`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ message: newText.trim() }),\r\n      });\r\n      if (res.ok) {\r\n        setMessages(prev =>\r\n          prev.map(m => m._id === msgId ? { ...m, message: newText.trim() } : m)\r\n        );\r\n        setEditingMsgId(null);\r\n      } else {\r\n        throw new Error('Edit failed');\r\n      }\r\n    } catch (err) {\r\n      errorLog('Failed to edit message:', err);\r\n      alert('Failed to edit message');\r\n    }\r\n  };\r\n\r\n  const sendReaction = (msgId, reaction) => {\r\n    if (!msgId || !reaction) return;\r\n    if (socketRef.current && typeof socketRef.current.emit === 'function') {\r\n      socketRef.current.emit('message_reaction', {\r\n        msgId,\r\n        reaction,\r\n        user: name,\r\n        room\r\n      });\r\n    }\r\n    setHighlightedMsgId(null);\r\n  };\r\n\r\n  const sendMessage = useCallback((msg = message, img = null, voice = null, fromVoice = false, file = null) => {\r\n    if (!socketRef.current || typeof socketRef.current.emit !== 'function') return;\r\n    \r\n    const messageText = msg?.trim() || '';\r\n    if (!messageText && !img && !voice && !file) return;\r\n    \r\n    const _clientId = Date.now() + Math.random().toString(36).substr(2, 9);\r\n    \r\n    if (recipient) {\r\n      const msgData = {\r\n        sender: name,\r\n        recipient,\r\n        message: messageText,\r\n        image: null,\r\n        voice: voice || null,\r\n        file: null,\r\n        _clientId\r\n      };\r\n      \r\n      if (img) {\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => {\r\n          socketRef.current.emit('private_message', { ...msgData, image: reader.result });\r\n          setPendingMessages(prev => [...prev, { ...msgData, image: reader.result }]);\r\n          setMessage('');\r\n        };\r\n        reader.readAsDataURL(img);\r\n        return;\r\n      }\r\n      \r\n      if (file) {\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => {\r\n          socketRef.current.emit('private_message', { \r\n            ...msgData, \r\n            file: { name: file.name, url: reader.result } \r\n          });\r\n          setPendingMessages(prev => [...prev, { \r\n            ...msgData, \r\n            file: { name: file.name, url: reader.result } \r\n          }]);\r\n          setMessage('');\r\n        };\r\n        reader.readAsDataURL(file);\r\n        return;\r\n      }\r\n      \r\n      socketRef.current.emit('private_message', msgData);\r\n      setPendingMessages(prev => [...prev, msgData]);\r\n      setMessage('');\r\n    } else {\r\n      if (img) {\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => {\r\n          const msgData = {\r\n            sender: name,\r\n            room,\r\n            message: messageText,\r\n            image: reader.result,\r\n            voice: null,\r\n            file: null,\r\n            timestamp: new Date().toISOString(),\r\n            _clientId\r\n          };\r\n          socketRef.current.emit('send_message', msgData);\r\n          setPendingMessages(prev => [...prev, msgData]);\r\n          setMessage('');\r\n        };\r\n        reader.readAsDataURL(img);\r\n        return;\r\n      }\r\n      \r\n      if (file) {\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => {\r\n          const msgData = {\r\n            sender: name,\r\n            room,\r\n            message: messageText,\r\n            image: null,\r\n            voice: null,\r\n            file: { name: file.name, url: reader.result },\r\n            timestamp: new Date().toISOString(),\r\n            _clientId\r\n          };\r\n          socketRef.current.emit('send_message', msgData);\r\n          setPendingMessages(prev => [...prev, msgData]);\r\n          setMessage('');\r\n        };\r\n        reader.readAsDataURL(file);\r\n        return;\r\n      }\r\n      \r\n      if (voice) {\r\n        const msgData = {\r\n          sender: name,\r\n          room,\r\n          message: messageText,\r\n          image: null,\r\n          voice: voice,\r\n          file: null,\r\n          timestamp: new Date().toISOString(),\r\n          _clientId\r\n        };\r\n        socketRef.current.emit('send_message', msgData);\r\n        setPendingMessages(prev => [...prev, msgData]);\r\n        if (fromVoice) setMessage('');\r\n        return;\r\n      }\r\n      \r\n      if (messageText) {\r\n        const msgData = {\r\n          sender: name,\r\n          room,\r\n          message: messageText,\r\n          image: null,\r\n          voice: null,\r\n          file: null,\r\n          timestamp: new Date().toISOString(),\r\n          _clientId\r\n        };\r\n        socketRef.current.emit('send_message', msgData);\r\n        setPendingMessages(prev => [...prev, msgData]);\r\n        setMessage('');\r\n      }\r\n    }\r\n    \r\n    if (socketRef.current && typeof socketRef.current.emit === 'function') {\r\n      socketRef.current.emit('typing', { username: name, room, isTyping: false });\r\n    }\r\n    setIsSenderTyping(false);\r\n  }, [message, recipient, name, room]);\r\n\r\n  const handleSearch = async (e) => {\r\n    e.preventDefault();\r\n    if (!searchTerm?.trim()) return;\r\n    try {\r\n      const res = await fetch(`${API_URL}/api/search?room=${room}&q=${encodeURIComponent(searchTerm.trim())}`);\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        setSearchResults(data?.results || data || []);\r\n      } else {\r\n        setSearchResults([]);\r\n      }\r\n    } catch (err) {\r\n      errorLog('Search failed:', err);\r\n      setSearchResults([]);\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    if (onLeave) onLeave();\r\n    navigate('/join');\r\n  };\r\n\r\n  if (!name || !room) {\r\n    return (\r\n      <div className=\"chat-container\">\r\n        <div style={{ padding: '20px', textAlign: 'center' }}>\r\n          Loading chat...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"chat-container\">\r\n      {/* Connection Status Indicators */}\r\n      {connectionError && (\r\n        <div style={{ \r\n          background: '#ff6b6b', \r\n          color: '#fff', \r\n          padding: '8px', \r\n          textAlign: 'center', \r\n          fontWeight: 'bold',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          gap: 8\r\n        }}>\r\n          <span>âš ï¸</span>\r\n          {connectionError}\r\n          <button \r\n            onClick={() => window.location.reload()} \r\n            style={{ \r\n              marginLeft: 10, \r\n              padding: '4px 8px', \r\n              background: '#fff', \r\n              color: '#ff6b6b', \r\n              border: 'none', \r\n              borderRadius: 4 \r\n            }}\r\n          >\r\n            Refresh\r\n          </button>\r\n        </div>\r\n      )}\r\n      {!isConnected && !connectionError && (\r\n        <div style={{ \r\n          background: '#ffeaa7', \r\n          color: '#d35400', \r\n          padding: '8px', \r\n          textAlign: 'center', \r\n          fontWeight: 'bold' \r\n        }}>\r\n          Disconnected. Trying to reconnect...\r\n        </div>\r\n      )}\r\n      {isReconnecting && (\r\n        <div style={{ \r\n          background: '#dfe6e9', \r\n          color: '#636e72', \r\n          padding: '8px', \r\n          textAlign: 'center', \r\n          fontWeight: 'bold' \r\n        }}>\r\n          Reconnecting...\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"chat-box\">\r\n        <span className=\"emoji-bg emoji1\">ðŸ’¬</span>\r\n        <span className=\"emoji-bg emoji2\">âœ¨</span>\r\n        <span className=\"emoji-bg emoji3\">ðŸš€</span>\r\n        <span className=\"emoji-bg emoji4\">ðŸ˜ƒ</span>\r\n        <span className=\"emoji-bg emoji5\">ðŸŽ‰</span>\r\n        \r\n        {showEmojiPicker && (\r\n          <div className=\"emoji-picker-popup\">\r\n            <button\r\n              className=\"emoji-close-btn\"\r\n              aria-label=\"Close emoji picker\"\r\n              onClick={() => setShowEmojiPicker(false)}\r\n            >\r\n              âœ–\r\n            </button>\r\n            <EmojiPicker\r\n              onEmojiClick={(emojiData) => setMessage(message + (emojiData?.emoji || ''))}\r\n              theme=\"light\"\r\n              width={320}\r\n            />\r\n          </div>\r\n        )}\r\n        \r\n        <button className=\"send-button\" onClick={handleBack}>â¬… Back</button>\r\n        <h2>Room: {room}</h2>\r\n        \r\n        {/* Debug info in development */}\r\n        {process.env.NODE_ENV === 'development' && (\r\n          <div style={{ \r\n            fontSize: '0.8em', \r\n            color: '#636e72', \r\n            padding: '4px 8px', \r\n            background: '#f1f2f6', \r\n            borderRadius: 4, \r\n            margin: '8px 0' \r\n          }}>\r\n            ðŸ”§ API: {API_URL} | Socket: {SOCKET_URL} | Connected: {isConnected ? 'âœ…' : 'âŒ'}\r\n          </div>\r\n        )}\r\n        \r\n        {/* Production connection status */}\r\n        {process.env.NODE_ENV === 'production' && (\r\n          <div style={{ \r\n            fontSize: '0.9em', \r\n            color: isConnected ? '#00b894' : '#e17055', \r\n            padding: '6px 12px', \r\n            background: isConnected ? '#d1f2eb' : '#fff5f5', \r\n            borderRadius: 8, \r\n            margin: '8px 0',\r\n            border: `1px solid ${isConnected ? '#00b894' : '#fab1a0'}`,\r\n            textAlign: 'center'\r\n          }}>\r\n            ðŸŒ {isConnected ? 'Connected to Cloud Server' : 'Connection Issue - Check Internet'}\r\n          </div>\r\n        )}\r\n        \r\n        <form onSubmit={handleSearch} style={{ margin: '10px 0', display: 'flex', gap: 8 }}>\r\n          <input\r\n            type=\"text\"\r\n            value={searchTerm}\r\n            onChange={e => setSearchTerm(e.target.value || '')}\r\n            placeholder=\"Search messages...\"\r\n            style={{ padding: '6px 12px', borderRadius: 8, border: '1px solid #b2bec3', flex: 1 }}\r\n          />\r\n          <button type=\"submit\" className=\"send-button\" style={{ padding: '6px 16px', borderRadius: 8 }}>\r\n            Search\r\n          </button>\r\n        </form>\r\n        \r\n        {searchResults.length > 0 && (\r\n          <div style={{ marginBottom: 12, background: '#dfe6e9', borderRadius: 8, padding: 10 }}>\r\n            <div style={{ fontWeight: 'bold', marginBottom: 6 }}>Search Results:</div>\r\n            {searchResults.map((msg, i) => (\r\n              <div key={i} style={{ marginBottom: 8, paddingBottom: 6, borderBottom: '1px solid #b2bec3' }}>\r\n                <span style={{ fontWeight: 'bold', color: '#0984e3' }}>{msg?.sender || 'Unknown'}</span>: {msg?.message || ''}\r\n                <span style={{ marginLeft: 8, color: '#636e72', fontSize: '0.9em' }}>\r\n                  {msg?.timestamp && new Date(msg.timestamp).toLocaleString()}\r\n                </span>\r\n              </div>\r\n            ))}\r\n            <button\r\n              className=\"send-button\"\r\n              style={{ marginTop: 10 }}\r\n              onClick={() => setSearchResults([])}\r\n            >\r\n              Back to Chat\r\n            </button>\r\n          </div>\r\n        )}\r\n        \r\n        <div style={{\r\n          margin: '10px 0 10px 0',\r\n          padding: '6px 16px',\r\n          background: '#f1f2f6',\r\n          borderRadius: '12px',\r\n          color: '#636e72',\r\n          fontSize: '0.98rem',\r\n          fontWeight: 'bold',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: 10,\r\n          flexWrap: 'wrap'\r\n        }}>\r\n          <span role=\"img\" aria-label=\"online\">ðŸŸ¢</span>\r\n          Online: {onlineUsers.map((u, index) => (\r\n            <span key={u || index} style={{\r\n              color: u === name ? '#6c5ce7' : '#636e72',\r\n              fontWeight: u === name ? 'bold' : 'normal',\r\n              marginRight: 8\r\n            }}>\r\n              {u || 'Unknown'}{u === name ? ' (You)' : ''}\r\n            </span>\r\n          ))}\r\n        </div>\r\n        \r\n        <div style={{\r\n          marginBottom: 10,\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          flexWrap: 'wrap',\r\n          justifyContent: 'flex-start'\r\n        }}>\r\n          <label htmlFor=\"recipient\" style={{\r\n            marginLeft: 22,\r\n            marginRight: 22,\r\n            whiteSpace: 'nowrap',\r\n            fontWeight: 400,\r\n            fontSize: '1rem'\r\n          }}>\r\n            Send private message to:\r\n          </label>\r\n          <select\r\n            id=\"recipient\"\r\n            value={recipient}\r\n            onChange={e => setRecipient(e.target.value || '')}\r\n            style={{ padding: '4px 8px', borderRadius: 6 }}\r\n          >\r\n            <option value=\"\">-- None --</option>\r\n            {onlineUsers.filter(u => u && u !== name).map((u, index) => (\r\n              <option key={u || index} value={u}>{u}</option>\r\n            ))}\r\n          </select>\r\n          {recipient && (\r\n            <span className=\"private-mode-text\">\r\n              (Private mode)\r\n            </span>\r\n          )}\r\n        </div>\r\n        \r\n        {isSenderTyping && (\r\n          <div className=\"typing-indicator\" style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\r\n            <span role=\"img\" aria-label=\"typing\">ðŸ’¬</span>\r\n            You are typing<TypingDots />\r\n          </div>\r\n        )}\r\n        \r\n        {typingUser && (\r\n          <div className=\"typing-indicator\" style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\r\n            <span role=\"img\" aria-label=\"typing\">ðŸ’¬</span>\r\n            {typingUser} is typing<TypingDots />\r\n          </div>\r\n        )}\r\n        \r\n        {unreadCount > 0 && (\r\n          <div className=\"unread-badge\">\r\n            {unreadCount} unread message{unreadCount > 1 ? 's' : ''}\r\n          </div>\r\n        )}\r\n        \r\n        <div style={{ textAlign: 'center', margin: '10px 0' }}>\r\n          {hasMore ? (\r\n            <button\r\n              className=\"load-older-btn\"\r\n              onClick={loadOlderMessages}\r\n              disabled={loadingOlder}\r\n            >\r\n              {loadingOlder ? 'Loading...' : 'Load Older Messages'}\r\n            </button>\r\n          ) : (\r\n            <span style={{ color: '#636e72', fontSize: '0.95rem' }}>No more messages</span>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"messages\" style={{\r\n          minHeight: 0,\r\n          flex: 1,\r\n          width: '100%',\r\n          overflowY: 'auto',\r\n          padding: '20px 8px 0 8px'\r\n        }}>\r\n          {messages.map((msg, i) => {\r\n            if (!msg) return null;\r\n            \r\n            const isUser = msg.sender === name;\r\n            const isFirst = i === 0;\r\n            const isPending = pendingMessages.some(pm => pm._clientId === msg._clientId);\r\n            const isHighlighted = highlightedMsgId === msg._id;\r\n            const isEditing = editingMsgId === msg._id;\r\n\r\n            const handleMouseDown = () => {\r\n              if (longPressTimerRef.current) {\r\n                clearTimeout(longPressTimerRef.current);\r\n              }\r\n              longPressTimerRef.current = setTimeout(() => setHighlightedMsgId(msg._id), 600);\r\n            };\r\n            const handleMouseUp = () => {\r\n              if (longPressTimerRef.current) {\r\n                clearTimeout(longPressTimerRef.current);\r\n              }\r\n            };\r\n            const handleMouseLeave = () => {\r\n              if (longPressTimerRef.current) {\r\n                clearTimeout(longPressTimerRef.current);\r\n              }\r\n            };\r\n\r\n            return (\r\n              <div\r\n                key={msg._id || i}\r\n                className={`message ${isUser ? 'sent' : 'received'}${isHighlighted ? ' highlighted' : ''}`}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'flex-start',\r\n                  marginBottom: 12,\r\n                  opacity: isPending ? 0.5 : 1,\r\n                  maxWidth: '100vw',\r\n                  background: isHighlighted ? '#ffeaa7' : undefined,\r\n                  border: isHighlighted ? '2px solid #fdcb6e' : undefined,\r\n                  transition: 'background 0.2s, border 0.2s'\r\n                }}\r\n                ref={isFirst ? firstMessageRef : null}\r\n                onMouseDown={handleMouseDown}\r\n                onMouseUp={handleMouseUp}\r\n                onMouseLeave={handleMouseLeave}\r\n                onTouchStart={handleMouseDown}\r\n                onTouchEnd={handleMouseUp}\r\n              >\r\n                <img\r\n                  src={msg.avatar || 'https://api.dicebear.com/7.x/bottts/svg?seed=User'}\r\n                  alt=\"avatar\"\r\n                  className=\"avatar-img\"\r\n                  style={{\r\n                    width: 36,\r\n                    height: 36,\r\n                    borderRadius: '50%',\r\n                    objectFit: 'cover',\r\n                    marginRight: 10,\r\n                    border: '2px solid #764ba2',\r\n                    background: '#fff'\r\n                  }}\r\n                />\r\n                <div className=\"bubble\" style={{ maxWidth: '90vw', wordBreak: 'break-word', overflowWrap: 'break-word' }}>\r\n                  {msg.private && (\r\n                    <div className=\"private-mode-text\">\r\n                      Private message\r\n                    </div>\r\n                  )}\r\n                  {isEditing ? (\r\n                    <form\r\n                      onSubmit={e => {\r\n                        e.preventDefault();\r\n                        handleEditMessage(msg._id, editingText);\r\n                      }}\r\n                      style={{ marginBottom: 8 }}\r\n                    >\r\n                      <input\r\n                        type=\"text\"\r\n                        value={editingText}\r\n                        onChange={e => setEditingText(e.target.value || '')}\r\n                        style={{ width: '80%', padding: 4, borderRadius: 6, border: '1px solid #b2bec3' }}\r\n                      />\r\n                      <button type=\"submit\" className=\"send-button\" style={{ marginLeft: 8 }}>Save</button>\r\n                      <button type=\"button\" className=\"send-button\" style={{ marginLeft: 4, background: '#636e72' }} onClick={() => setEditingMsgId(null)}>Cancel</button>\r\n                    </form>\r\n                  ) : (\r\n                    <>\r\n                      {msg.message && <div>{msg.message}</div>}\r\n                      {!msg.message && msg.image && (\r\n                        <div style={{fontStyle:'italic',color:'#888',display:'flex',alignItems:'center',gap:4}}>\r\n                          <span role=\"img\" aria-label=\"image\">ðŸ–¼ï¸</span> Image\r\n                        </div>\r\n                      )}\r\n                      {!msg.message && msg.voice && (\r\n                        <div style={{fontStyle:'italic',color:'#888',display:'flex',alignItems:'center',gap:4}}>\r\n                          <span role=\"img\" aria-label=\"voice\">ðŸŽ¤</span> Voice note\r\n                        </div>\r\n                      )}\r\n                      {msg.file?.url && (\r\n                        <div style={{marginTop:8}}>\r\n                          <span role=\"img\" aria-label=\"file\">ðŸ“Ž</span>\r\n                          <a href={msg.file.url} download={msg.file.name} target=\"_blank\" rel=\"noopener noreferrer\" style={{color:'#0984e3',textDecoration:'underline',marginLeft:4}}>\r\n                            {msg.file.name || 'Download file'}\r\n                          </a>\r\n                        </div>\r\n                      )}\r\n                      {msg.image && (\r\n                        <a href={msg.image} download={`chat-image-${i}.png`} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                          <img\r\n                            src={msg.image}\r\n                            alt=\"sent\"\r\n                            className=\"chat-image\"\r\n                            style={{ maxWidth: '90vw', maxHeight: 120, borderRadius: 10, marginTop: 8, display: 'block', cursor: 'pointer' }}\r\n                          />\r\n                        </a>\r\n                      )}\r\n                      {msg.voice && msg.voice.startsWith('data:audio') && (\r\n                        <div style={{display:'flex',alignItems:'center',gap:6,marginTop:8}}>\r\n                          <span role=\"img\" aria-label=\"play\">ðŸ”Š</span>\r\n                          <audio controls style={{ width: '90vw', maxWidth: 240 }}>\r\n                            <source src={msg.voice} type=\"audio/webm\" />\r\n                            Your browser does not support audio.\r\n                          </audio>\r\n                        </div>\r\n                      )}\r\n                      <div className=\"timestamp\">{msg.timestamp && new Date(msg.timestamp).toLocaleString()}</div>\r\n                      {isPending && (\r\n                        <span style={{ color: '#fdcb6e', marginLeft: 8, fontSize: '0.9em' }}>\r\n                          Sending...\r\n                        </span>\r\n                      )}\r\n                      {isUser && msg.readBy && (\r\n                        <span style={{ color: '#00b894', fontSize: '0.9em', marginLeft: 8 }}>\r\n                          {msg.readBy.length === onlineUsers.length - 1 ? 'âœ”âœ” Read' : 'âœ” Sent'}\r\n                        </span>\r\n                      )}\r\n                      {isHighlighted && msg._id && !isEditing && (\r\n                        <div style={{ marginTop: 8, display: 'flex', gap: 8, flexWrap: 'wrap' }}>\r\n                          {isUser && (\r\n                            <button\r\n                              style={{\r\n                                background: '#00b894',\r\n                                color: '#fff',\r\n                                border: 'none',\r\n                                borderRadius: 6,\r\n                                padding: '4px 12px',\r\n                                cursor: 'pointer'\r\n                              }}\r\n                              onClick={() => {\r\n                                setEditingMsgId(msg._id);\r\n                                setEditingText(msg.message || '');\r\n                              }}\r\n                            >\r\n                              Edit\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            style={{\r\n                              background: '#d63031',\r\n                              color: '#fff',\r\n                              border: 'none',\r\n                              borderRadius: 6,\r\n                              padding: '4px 12px',\r\n                              cursor: 'pointer'\r\n                            }}\r\n                            onClick={() => handleDeleteMessage(msg._id)}\r\n                          >\r\n                            Delete\r\n                          </button>\r\n                          <div style={{ display: 'flex', gap: 4, flexWrap: 'wrap' }}>\r\n                            {REACTIONS.map(r => (\r\n                              <button\r\n                                key={r}\r\n                                style={{\r\n                                  background: '#fff',\r\n                                  border: '1px solid #b2bec3',\r\n                                  borderRadius: 6,\r\n                                  padding: '2px 8px',\r\n                                  cursor: 'pointer',\r\n                                  fontSize: '1.2em'\r\n                                }}\r\n                                onClick={() => sendReaction(msg._id, r)}\r\n                                title={`React with ${r}`}\r\n                              >\r\n                                {r}\r\n                              </button>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      {msg.reactions && msg.reactions.length > 0 && (\r\n                        <div style={{ marginTop: 6, display: 'flex', gap: 8, flexWrap: 'wrap' }}>\r\n                          {REACTIONS.map(r => {\r\n                            const count = msg.reactions.filter(rx => rx?.reaction === r).length;\r\n                            return count > 0 ? (\r\n                              <span key={r} style={{ background: '#dfe6e9', borderRadius: 8, padding: '2px 8px', fontSize: '1.1em' }}>\r\n                                {r} {count}\r\n                              </span>\r\n                            ) : null;\r\n                          })}\r\n                        </div>\r\n                      )}\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n        \r\n        <div\r\n          className=\"input-group\"\r\n          style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: 10,\r\n            flexWrap: 'nowrap',\r\n            overflowX: 'auto',\r\n            paddingBottom: 'env(safe-area-inset-bottom, 24px)',\r\n            marginBottom: 16\r\n          }}\r\n        >\r\n          <input\r\n            className=\"message-input\"\r\n            type=\"text\"\r\n            name=\"chat-message\"\r\n            placeholder=\"Type message...\"\r\n            value={message}\r\n            onChange={(e) => {\r\n              setMessage(e.target.value || '');\r\n              if (socketRef.current && typeof socketRef.current.emit === 'function') {\r\n                socketRef.current.emit('typing', { username: name, room, isTyping: (e.target.value || '').length > 0 });\r\n              }\r\n              setIsSenderTyping((e.target.value || '').length > 0);\r\n            }}\r\n            onKeyDown={e => e.key === 'Enter' && sendMessage()}\r\n            style={{\r\n              flex: '1 1 auto',\r\n              minWidth: 80,\r\n              paddingBottom: 12,\r\n              fontSize: '1.05em'\r\n            }}\r\n            autoComplete=\"off\"\r\n            autoCorrect=\"on\"\r\n            spellCheck={true}\r\n            disabled={!isConnected}\r\n          />\r\n          <button\r\n            className=\"icon-button\"\r\n            title=\"Add emoji\"\r\n            onClick={() => setShowEmojiPicker(!showEmojiPicker)}\r\n            style={{ flex: '0 0 auto' }}\r\n            disabled={!isConnected}\r\n          >\r\n            <span role=\"img\" aria-label=\"emoji\">ðŸ˜ƒ</span>\r\n          </button>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            name=\"chat-image\"\r\n            ref={fileInputRef}\r\n            onChange={(e) => {\r\n              if (e.target.files && e.target.files[0]) {\r\n                sendMessage('', e.target.files[0], null);\r\n                e.target.value = '';\r\n              }\r\n            }}\r\n            hidden\r\n          />\r\n          <button \r\n            className=\"icon-button\" \r\n            onClick={() => fileInputRef.current?.click()} \r\n            title=\"Send image\" \r\n            style={{ flex: '0 0 auto' }}\r\n            disabled={!isConnected}\r\n          >\r\n            <span role=\"img\" aria-label=\"camera\">ðŸ“·</span>\r\n          </button>\r\n          <input\r\n            type=\"file\"\r\n            accept=\".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.txt,.zip,.rar,.csv,application/*\"\r\n            style={{ display: 'none' }}\r\n            id=\"file-upload\"\r\n            onChange={e => {\r\n              if (e.target.files && e.target.files[0]) {\r\n                sendMessage('', null, null, false, e.target.files[0]);\r\n                e.target.value = '';\r\n              }\r\n            }}\r\n          />\r\n          <button\r\n            className=\"icon-button\"\r\n            title=\"Send file\"\r\n            style={{ flex: '0 0 auto' }}\r\n            onClick={() => document.getElementById('file-upload')?.click()}\r\n            disabled={!isConnected}\r\n          >\r\n            <span role=\"img\" aria-label=\"file\">ðŸ“Ž</span>\r\n          </button>\r\n          {!recording ? (\r\n            <button \r\n              className=\"icon-button\" \r\n              onClick={startRecording} \r\n              title=\"Record voice note\" \r\n              style={{ flex: '0 0 auto' }}\r\n              disabled={!isConnected}\r\n            >\r\n              <span role=\"img\" aria-label=\"mic\">ðŸŽ™ï¸</span>\r\n            </button>\r\n          ) : (\r\n            <button \r\n              className=\"icon-button\" \r\n              onClick={stopRecording} \r\n              style={{ color: 'red', flex: '0 0 auto' }} \r\n              title=\"Stop recording\"\r\n            >\r\n              <span role=\"img\" aria-label=\"stop\">â¹ï¸</span>\r\n            </button>\r\n          )}\r\n          {recording && (\r\n            <span style={{ marginLeft: 10, color: '#e17055', fontWeight: 'bold', display: 'flex', alignItems: 'center', gap: 4, flex: '0 0 auto' }}>\r\n              <span role=\"img\" aria-label=\"timer\">â±ï¸</span> {recordingTime}s\r\n            </span>\r\n          )}\r\n          <button \r\n            className=\"send-button\" \r\n            onClick={() => sendMessage()} \r\n            style={{ flex: '0 0 auto' }}\r\n            disabled={!isConnected}\r\n          >\r\n            <span role=\"img\" aria-label=\"send\">ðŸ“¤</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}